# ğŸ“˜ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„ í‘œì¤€ì„œ

## ì¤‘ì†Œê¸°ì—… ê²½ì˜ í”Œë«í¼ â€” ê°œì¸ ë„êµ¬í˜• SaaS

---

## ë¬¸ì„œ ê´€ë¦¬ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| ë¬¸ì„œ ë²ˆí˜¸ | FE-STD-2025-001 |
| ë¬¸ì„œ ë¶„ë¥˜ | ì„¤ê³„ í‘œì¤€ |
| ëŒ€ìƒ ì‹œìŠ¤í…œ | ì¤‘ì†Œê¸°ì—… ê²½ì˜ í”Œë«í¼ (Corp DB Manager / HandsDB) |
| ì„œë¹„ìŠ¤ í˜•íƒœ | ê°œì¸ ë„êµ¬í˜• SaaS (ê°€ì… â†’ ë‚´ DB ì„œë²„ ì—°ê²° â†’ ê´€ë¦¬) |
| ì ìš© ë²”ìœ„ | í”„ë¡ íŠ¸ì—”ë“œ ì „ ì˜ì—­ (UI/UX, ìƒíƒœê´€ë¦¬, API í†µì‹ , ë³´ì•ˆ, SaaS) |
| ì‘ì„± ê¸°ì¤€ | ì‹¤ìš´ì˜ ì¥ì•  ì‚¬ë¡€ + SaaS ì„œë¹„ìŠ¤ ìš”êµ¬ì‚¬í•­ ê¸°ë°˜ |
| ë²„ì „ | v4.0 |

### ë¬¸ì„œ ì´ë ¥

| ë²„ì „ | ì¼ì | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| v1.0 | â€” | Alpine + HTMX ê¸°ë³¸ ê·œì¹™ ìˆ˜ë¦½ |
| v2.0 | â€” | Core ê³„ì¸µ ì‹ ì„¤, ë„¤ì´ë° ì»¨ë²¤ì…˜, ë³´ì•ˆ/ì¸ì¦, ì—ëŸ¬ í•¸ë“¤ë§ í‘œì¤€í™” |
| v3.0 | 2025 | ì„¤ê³„ í‘œì¤€ì„œ ì²´ê³„ ì „í™˜, ì•„í‚¤í…ì²˜ ì •ì˜, ì½”ë“œ ë¦¬ë·° ê¸°ì¤€, ì„±ëŠ¥/ì ‘ê·¼ì„± |
| v3.1 | 2025 | ë””ë ‰í„°ë¦¬ í™•ì¥ (utils, constants, validators, mixins, layouts, partials, widgets) |
| v4.0 | 2025 | ê°œì¸ ë„êµ¬í˜• SaaS ì „í™˜, í”Œëœ/ê¶Œí•œ/ì‚¬ìš©ëŸ‰ ì„¤ê³„, ë©€í‹° ì„œë²„ ì°¸ì¡° íŒ¨í„´, ì ‘ì† ì´ë ¥/ì¦ê²¨ì°¾ê¸°, ë§ˆì´ê·¸ë ˆì´ì…˜ ìœ„ìë“œ |

### ê´€ë ¨ ë¬¸ì„œ

| ë¬¸ì„œëª… | ì„¤ëª… |
|--------|------|
| FE-REF-2025-001 | í”„ë¡ íŠ¸ì—”ë“œ ë¦¬íŒ©í† ë§ ê³„íšì„œ |
| BE-STD-2025-001 | ë°±ì—”ë“œ API ì„¤ê³„ í‘œì¤€ì„œ |
| SEC-STD-2025-001 | ë³´ì•ˆ ì„¤ê³„ í‘œì¤€ì„œ |
| DB-STD-2025-001 | ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ í‘œì¤€ì„œ |

---

## ëª©ì°¨

| ì¥ | ì œëª© | ë¹„ê³  |
|----|------|------|
| 1 | ì´ì¹™ | |
| 2 | ìš©ì–´ ì •ì˜ | |
| 3 | ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ | |
| 4 | ì„¤ê³„ ì›ì¹™ | |
| 5 | ë„¤ì´ë° ì»¨ë²¤ì…˜ | |
| 6 | ë””ë ‰í„°ë¦¬ êµ¬ì¡° | |
| 7 | Core ê³„ì¸µ ì„¤ê³„ í‘œì¤€ | SaaS ì—ëŸ¬(402/429/503) í¬í•¨ |
| 8 | Constants ì„¤ê³„ í‘œì¤€ | SaaS/Feature ìƒìˆ˜ í¬í•¨ |
| 9 | Utils / Validators ì„¤ê³„ í‘œì¤€ | |
| 10 | Mixins ì„¤ê³„ í‘œì¤€ | |
| 11 | Store ì„¤ê³„ í‘œì¤€ | User/Usage/ServerHistory/Migration í¬í•¨ |
| 12 | Service ì„¤ê³„ í‘œì¤€ | ë©€í‹° ì„œë²„ ì°¸ì¡° íŒ¨í„´ í¬í•¨ |
| 13 | Action ì„¤ê³„ í‘œì¤€ | ê¸°ëŠ¥ ê¶Œí•œ ê²€ì¦, ì´ë ¥ ìë™ ê¸°ë¡ í¬í•¨ |
| 14 | ë¼ìš°íŒ… ì„¤ê³„ í‘œì¤€ | |
| 15 | UI ê³„ì¸µ ì„¤ê³„ í‘œì¤€ | ìœ„ìë“œ íŒ¨í„´, SaaS Partial í¬í•¨ |
| 16 | ì •ì  ë¦¬ì†ŒìŠ¤ ì„¤ê³„ í‘œì¤€ | |
| 17 | ë³´ì•ˆ ì„¤ê³„ í‘œì¤€ | |
| 18 | ì—ëŸ¬ ì²˜ë¦¬ ì„¤ê³„ í‘œì¤€ | SaaS ì—ëŸ¬ íë¦„ í¬í•¨ |
| 19 | ì„±ëŠ¥ ì„¤ê³„ ê¸°ì¤€ | |
| 20 | ì ‘ê·¼ì„± ì„¤ê³„ ê¸°ì¤€ | |
| 21 | ì½”ë“œ ë¦¬ë·° ê¸°ì¤€ | SaaS í•­ëª© ì¶”ê°€ |
| 22 | ì¥ì•  ëŒ€ì‘ ì ˆì°¨ | |
| 23 | ì‹ ê·œ ë„ë©”ì¸ ì¶”ê°€ ì ˆì°¨ | |
| 24 | ë¶€ë¡ | |

---

## 1. ì´ì¹™

### 1.1 ëª©ì 

ë³¸ ë¬¸ì„œëŠ” **ì¤‘ì†Œê¸°ì—… ê²½ì˜ í”Œë«í¼ì˜ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„ í‘œì¤€**ì„ ì •ì˜í•œë‹¤. ë³¸ ì‹œìŠ¤í…œì€ ê°œì¸ ë„êµ¬í˜• SaaSë¡œì„œ, ì‚¬ìš©ìê°€ ê°€ì… í›„ ìì‹ ì˜ DB ì„œë²„ë¥¼ ì—°ê²°í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤ë‹¤. ëª¨ë“  í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì€ ë³¸ ë¬¸ì„œì˜ ê¸°ì¤€ì„ ë”°ë¥´ë©°, ì˜ˆì™¸ ì‹œ ì„¤ê³„ ë¦¬ë·°ë¥¼ í†µí•´ ì‚¬ì „ ìŠ¹ì¸ì„ ë°›ì•„ì•¼ í•œë‹¤.

### 1.2 ì„œë¹„ìŠ¤ êµ¬ì¡°

```
ì‚¬ìš©ì ê°€ì…/ë¡œê·¸ì¸ (ì„œë²„ ê¸°ë°˜ ì¸ì¦)
  â†’ ë‚´ DB ì„œë²„ ë“±ë¡ (ì ‘ì† ì •ë³´ ì„¤ì •)
  â†’ DB ê´€ë¦¬ (í…Œì´ë¸” ì¡°íšŒ, ì´ˆê¸°í™”, ë§ˆì´ê·¸ë ˆì´ì…˜, AI ì¿¼ë¦¬)
  â†’ ì ‘ì† ì´ë ¥/ì¦ê²¨ì°¾ê¸°ë¡œ ë¹ ë¥¸ ì ‘ê·¼
  â†’ í”Œëœë³„ ê¸°ëŠ¥ ì°¨ë“± ì œê³µ (Free/Pro/Enterprise)
```

### 1.3 ì ìš© ëŒ€ìƒ

- ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ
- ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜ì • ë° ë¦¬íŒ©í† ë§
- ë²„ê·¸ ìˆ˜ì • ì‹œ êµ¬ì¡° ë³€ê²½ì´ ìˆ˜ë°˜ë˜ëŠ” ê²½ìš°

### 1.4 ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  | ë²„ì „ | ì—­í•  |
|------|------|------|------|
| ì„œë²„ ë Œë”ë§ | FastAPI + Jinja2 | â€” | SSR, ë¼ìš°íŒ…, ê¶Œí•œ |
| DOM ì „í™˜ | HTMX | 1.9+ | ë¶€ë¶„ í˜ì´ì§€ êµì²´, URL ê´€ë¦¬ |
| ìƒíƒœ ê´€ë¦¬ | Alpine.js | 3.x | í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ, UI ë°”ì¸ë”© |
| HTTP í†µì‹  | Fetch API | â€” | HttpClient ë˜í¼ ê²½ìœ  |

### 1.5 ì„¤ê³„ ëª©í‘œ

| ëª©í‘œ | ì¸¡ì • ê¸°ì¤€ |
|------|----------|
| ì¥ì•  ì˜ˆë°© | ReferenceError / ìƒíƒœ ìœ ì‹¤ / ì „í™˜ ì˜¤ë¥˜ = 0 |
| ì—­í•  ë¶„ë¦¬ | AlpineÂ·HTMXÂ·Server ê°„ ì±…ì„ ì¶©ëŒ = 0 |
| ì¼ê´€ì„± | ì½”ë“œ ë¦¬ë·° ìœ„ë°˜ í•­ëª© = 0 |
| ì¶”ì ì„± | ì¥ì•  ì›ì¸ ì¶”ì  ì‹œê°„ â‰¤ 15ë¶„ |
| ë³´ì•ˆ | CSRFÂ·XSSÂ·ì¸ì¦ ë§Œë£Œ ê³µí†µ ì²˜ë¦¬ 100% |
| ì¬ì‚¬ìš©ì„± | ê³µí†µ ëª¨ë“ˆ ì¤‘ë³µ ì½”ë“œ = 0 |
| SaaS ì•ˆì •ì„± | ì„œë²„ ì „í™˜ ì‹œ ì´ì „ ë°ì´í„° ì”ì¡´ = 0 |

---

## 2. ìš©ì–´ ì •ì˜

| ìš©ì–´ | ì •ì˜ |
|------|------|
| **Store** | Alpine.store()ë¡œ ë“±ë¡ëœ ì „ì—­ ìƒíƒœ ì €ì¥ì†Œ. Single Source of Truth |
| **Action** | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ ë‹¨ìœ„. Store ì œì–´ì™€ Service í˜¸ì¶œì„ ì¡°ìœ¨ |
| **Service** | API í†µì‹  ì „ë‹´ ê³„ì¸µ. HttpClientë¥¼ ê²½ìœ í•˜ì—¬ ì„œë²„ì™€ ë°ì´í„° êµí™˜ |
| **Page** | HTMXê°€ êµì²´í•˜ëŠ” View ë‹¨ìœ„. HTML í…œí”Œë¦¿ìœ¼ë¡œë§Œ êµ¬ì„± (JS ê¸ˆì§€) |
| **Core** | í”„ë ˆì„ì›Œí¬ ë ˆë²¨ ê³µí†µ ëª¨ë“ˆ. ErrorHandler, HttpClient, HtmxConfig |
| **Utils** | ë„ë©”ì¸ ë¬´ê´€ ìˆœìˆ˜ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ëª¨ìŒ |
| **Constants** | ì‹œìŠ¤í…œ ì „ì—­ ìƒìˆ˜Â·ì„¤ì •ê°’ ì •ì˜ ëª¨ìŒ |
| **Validators** | ê³µí†µ ìœ íš¨ì„± ê²€ì¦ í•¨ìˆ˜ ëª¨ìŒ |
| **Mixins** | ì—¬ëŸ¬ Pageì—ì„œ ì¬ì‚¬ìš©í•˜ëŠ” Alpine x-data íŒ¨í„´ |
| **Partial** | ì—¬ëŸ¬ Pageì—ì„œ includeë˜ëŠ” ì¬ì‚¬ìš© HTML ì¡°ê° |
| **Widget** | ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ìì²´ ì™„ê²°í˜• UI ì»´í¬ë„ŒíŠ¸ |
| **Layout** | Pageë¥¼ ê°ì‹¸ëŠ” ì™¸ë¶€ ê³¨ê²© HTML |
| **Router** | ì„œë²„ URL + HTMX(hx-get)ì˜ ì¡°í•©. SPA Router ì•„ë‹˜ |
| **Domain** | í•˜ë‚˜ì˜ ì—…ë¬´ ì˜ì—­ (ì˜ˆ: tableInit, dbHealth, migration) |
| **SSoT** | Single Source of Truth. í•˜ë‚˜ì˜ ë°ì´í„°ì— í•˜ë‚˜ì˜ ì €ì¥ì†Œë§Œ ì¡´ì¬ |
| **Swap** | HTMXê°€ ì„œë²„ ì‘ë‹µ HTMLë¡œ DOMì˜ ì¼ë¶€ë¥¼ êµì²´í•˜ëŠ” ë™ì‘ |
| **Vendor** | 3rd-party ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë¡œì»¬ ê´€ë¦¬ ì‚¬ë³¸ |
| **í”Œëœ** | SaaS ê³¼ê¸ˆ ë“±ê¸‰ (Free/Pro/Enterprise) |
| **Feature** | í”Œëœì— ë”°ë¼ í™œì„±í™”ë˜ëŠ” ê¸°ëŠ¥ ë‹¨ìœ„ |
| **Source/Target** | ë§ˆì´ê·¸ë ˆì´ì…˜ì—ì„œ ì›ë³¸ ì„œë²„/ëŒ€ìƒ ì„œë²„ |

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ë¸Œë¼ìš°ì € (Client)                             â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Templates (HTML)                                              â”‚  â”‚
â”‚  â”‚  layouts/ â”‚ pages/ â”‚ components/ â”‚ partials/ â”‚ widgets/ â”‚ emailsâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  JavaScript ê³„ì¸µ                                               â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Core   â”‚ â”‚   Utils   â”‚ â”‚  Constants â”‚ â”‚  Validators   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚       â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚  â”‚ Mixins  â”‚    â”‚  Store   â”‚â—€â”€â”€â”€â”‚  Action  â”‚                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          â”‚    â”‚          â”‚                 â”‚  â”‚
â”‚  â”‚                 â”‚ user     â”‚    â”‚ ê¸°ëŠ¥ ê¶Œí•œ  â”‚                 â”‚  â”‚
â”‚  â”‚                 â”‚ usage    â”‚    â”‚ ì´ë ¥ ìë™  â”‚                 â”‚  â”‚
â”‚  â”‚                 â”‚ svrHist  â”‚    â”‚ try/catch â”‚                 â”‚  â”‚
â”‚  â”‚                 â”‚ migrationâ”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”‚                 â”‚ domain.. â”‚         â”‚                        â”‚  â”‚
â”‚  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚                                 â”‚ Service  â”‚                 â”‚  â”‚
â”‚  â”‚                                 â”‚ serverId â”‚                 â”‚  â”‚
â”‚  â”‚                                 â”‚ ë§¤ê°œë³€ìˆ˜   â”‚                 â”‚  â”‚
â”‚  â”‚                                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Static: css/(themes,components) â”‚ images/ â”‚ vendor/           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚ HTTP (Fetch API)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì„œë²„ (FastAPI)         â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Router  â”‚â”€â”€â”€â–¶â”‚Controllerâ”‚â”€â”€â”€â–¶â”‚ Service  â”‚â”€â”€â”€â–¶â”‚  DB/ì™¸ë¶€  â”‚       â”‚
â”‚  â”‚ (URL/ê¶Œí•œ)â”‚    â”‚          â”‚    â”‚          â”‚    â”‚          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ìš”ì²­ íë¦„ë„

#### í˜ì´ì§€ ì „í™˜ (HTMX)

```
ì‚¬ìš©ì í´ë¦­ â†’ hx-get â†’ HTMX GET ìš”ì²­ â†’ FastAPI HTML ë°˜í™˜
â†’ HTMX #page-content innerHTML êµì²´ â†’ hx-push-url URL ê°±ì‹ 
â†’ Alpine x-init â†’ Action.onEnter() â†’ Store ì´ˆê¸°í™” + ë°ì´í„° ë¡œë“œ
```

#### API í˜¸ì¶œ (Action â†’ Service)

```
ì‚¬ìš©ì ì´ë²¤íŠ¸ â†’ Action í˜¸ì¶œ â†’ Validators ì…ë ¥ ê²€ì¦
â†’ store.loading = true â†’ Service í˜¸ì¶œ
â†’ HttpClient.get/post() (CSRF ìë™ ì£¼ì…)
â†’ ì„œë²„ ì‘ë‹µ â†’ store ë°˜ì˜ (Utils í¬ë§· ê°€ê³µ)
â†’ store.loading = false â†’ Alpine ìë™ View ê°±ì‹ 
â†’ ServerHistoryActions.recordAccess() (ì´ë ¥ ìë™ ê¸°ë¡)
```

#### ì—ëŸ¬ ë°œìƒ ì‹œ

```
Service throw â†’ Action catch â†’ ErrorHandler.handle()
â†’ 401: ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸
â†’ 402: í”Œëœ ì—…ê·¸ë ˆì´ë“œ ì•ˆë‚´
â†’ 403: ê¶Œí•œ ì—†ìŒ
â†’ 408: íƒ€ì„ì•„ì›ƒ
â†’ 422: ìœ íš¨ì„± ì—ëŸ¬
â†’ 429: ìš”ì²­ í•œë„ ì´ˆê³¼
â†’ 503: ì„œë¹„ìŠ¤ ì ê²€
â†’ ê¸°íƒ€: ê³µí†µ ì—ëŸ¬ ì•Œë¦¼ + ìš´ì˜ ë¦¬í¬íŒ…
â†’ finally: store.loading = false
```

#### ë§ˆì´ê·¸ë ˆì´ì…˜ (ë©€í‹° ì„œë²„ ì°¸ì¡°)

```
Source ì„œë²„ ì„ íƒ â†’ MigrationService.fetchDatabases(sourceId)
â†’ Source DB ì„ íƒ â†’ MigrationService.fetchTables(sourceId, dbName)
â†’ Target ì„œë²„ ì„ íƒ â†’ MigrationService.fetchDatabases(targetId)
â†’ Target DB ì„ íƒ â†’ ì¶©ëŒ í…Œì´ë¸” ìë™ ê°ì§€
â†’ ì˜µì…˜ ì„¤ì • â†’ ì‹¤í–‰ â†’ ì§„í–‰ë¥  í‘œì‹œ â†’ ê²°ê³¼
```

### 3.3 ê³„ì¸µ ê°„ ì˜ì¡´ì„± ê·œì¹™

| í˜¸ì¶œì â†’ ëŒ€ìƒ | Store | Action | Service | Core | Utils | Constants | Validators | DOM |
|--------------|-------|--------|---------|------|-------|-----------|------------|-----|
| **Page** | ì½ê¸° | âœ… í˜¸ì¶œ | âŒ | âŒ | âŒ | âŒ | âŒ | ë°”ì¸ë”© |
| **Mixins** | ì½ê¸° | âœ… í˜¸ì¶œ | âŒ | âŒ | âœ… | âœ… | âŒ | ë°”ì¸ë”© |
| **Action** | ì½ê¸°/ì“°ê¸° | â€” | âœ… í˜¸ì¶œ | âœ… | âœ… | âœ… | âœ… | âŒ |
| **Service** | âŒ | âŒ | â€” | âœ… | âœ… | âœ… | âŒ | âŒ |
| **Store** | â€” | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| **Utils** | âŒ | âŒ | âŒ | âŒ | â€” | âœ… | âŒ | âŒ |
| **Validators** | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… | â€” | âŒ |

**ê¸ˆì§€ ì˜ì¡´:**
Storeâ†’Service, Storeâ†’Store, Serviceâ†’Store, Pageâ†’Service, Actionâ†’DOM, Utilsâ†’Store, Validatorsâ†’Store

---

## 4. ì„¤ê³„ ì›ì¹™

### 4.1 í•µì‹¬ ì›ì¹™

| ë²ˆí˜¸ | ì›ì¹™ | ì„¤ëª… |
|------|------|------|
| P-01 | **ì—­í•  ë¶„ë¦¬** | RouterÂ·HTMXÂ·AlpineÂ·ActionÂ·Service ì±…ì„ ëª…í™• ë¶„ë¦¬ |
| P-02 | **ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›** | í•˜ë‚˜ì˜ ë°ì´í„°ì— í•˜ë‚˜ì˜ Store |
| P-03 | **ì„œë²„ ì¤‘ì‹¬ ë¼ìš°íŒ…** | URL/ê¶Œí•œì€ ì„œë²„ ê´€ë¦¬, Alpineì€ URL ëª¨ë¦„ |
| P-04 | **View ìˆœìˆ˜ì„±** | Pageì— JS ë¡œì§ ê¸ˆì§€ |
| P-05 | **ê³µí†µ ëª¨ë“ˆ ê²½ìœ ** | APIâ†’HttpClient, ì—ëŸ¬â†’ErrorHandler í•„ìˆ˜ ê²½ìœ  |
| P-06 | **ë°©ì–´ì  ì½”ë”©** | ëª¨ë“  ë¹„ë™ê¸°ì— try/catch/finally |
| P-07 | **ìµœì†Œ ê¶Œí•œ** | ê° ê³„ì¸µì€ ìê¸° ì±…ì„ ì™¸ ì ‘ê·¼ ê¸ˆì§€ |
| P-08 | **ìˆœìˆ˜ í•¨ìˆ˜ ìš°ì„ ** | Utils, ValidatorsëŠ” ì™¸ë¶€ ìƒíƒœ ë¹„ì˜ì¡´ |
| P-09 | **ìƒìˆ˜ ì¤‘ì•™ ê´€ë¦¬** | ë§¤ì§ ë„˜ë²„Â·í•˜ë“œì½”ë”©ì€ Constants ê´€ë¦¬ |
| P-10 | **ì¬ì‚¬ìš© íŒ¨í„´í™”** | ë°˜ë³µ UI â†’ Mixins/Partials/Widgets |
| P-11 | **serverId ë§¤ê°œë³€ìˆ˜** | ServiceëŠ” currentServerì— ì˜ì¡´í•˜ì§€ ì•Šê³  serverIdë¥¼ ë°›ëŠ”ë‹¤ |
| P-12 | **ì„œë²„ ì „í™˜ ì‹œ ê²©ë¦¬** | DB ì„œë²„ ë³€ê²½ ì‹œ ë„ë©”ì¸ Store ì´ˆê¸°í™” |

### 4.2 ê¸ˆì§€ íŒ¨í„´ ëª©ë¡

| ì½”ë“œ | ê¸ˆì§€ íŒ¨í„´ | ëŒ€ì•ˆ |
|------|----------|------|
| X-01 | Page ë‚´ JS í•¨ìˆ˜ ì„ ì–¸ | actions/*.jsì— ì •ì˜ |
| X-02 | HTMX swap í›„ `<script>` ì˜ì¡´ | x-initìœ¼ë¡œ ì§„ì… ì œì–´ |
| X-03 | ì „ì—­ ë³€ìˆ˜ ì‚¬ìš© | Alpine.store() |
| X-04 | eval(), beforeSwap ë¡œì§ | Action ê³„ì¸µ ì²˜ë¦¬ |
| X-05 | Alpine ì»´í¬ë„ŒíŠ¸ í˜ì´ì§€ë³„ ì¤‘ë³µ | base.html 1íšŒ ë˜ëŠ” Mixins |
| X-06 | Alpineì´ ë¼ìš°í„° ì—­í•  | HTMX hx-get |
| X-07 | Storeì—ì„œ ì§ì ‘ fetch | Service ê³„ì¸µ ê²½ìœ  |
| X-08 | Actionì—ì„œ DOM ì§ì ‘ ì¡°ì‘ | store â†’ Alpine ë°”ì¸ë”© |
| X-09 | Serviceì—ì„œ store ë³€ê²½ | ì‘ë‹µë§Œ return |
| X-10 | Store ê°„ ì§ì ‘ ì°¸ì¡° | Actionì—ì„œ ì¡°í•© |
| X-11 | window.alert/confirm | store.ui ê²½ìœ  |
| X-12 | ì§ì ‘ fetch() í˜¸ì¶œ | HttpClient ê²½ìœ  |
| X-13 | window.location ì§ì ‘ ì œì–´ | HTMX ë˜ëŠ” ErrorHandler |
| X-14 | x-htmlì— ì‚¬ìš©ì ì…ë ¥ | x-text ì‚¬ìš© |
| X-15 | ë§¤ì§ ë„˜ë²„Â·í•˜ë“œì½”ë”© URL | Constants ê´€ë¦¬ |
| X-16 | Utils/Validatorsì—ì„œ store ì°¸ì¡° | ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ |
| X-17 | Vendor íŒŒì¼ ì§ì ‘ ìˆ˜ì • | ì˜¤ë²„ë¼ì´ë“œ ë¶„ë¦¬ |
| X-18 | CSS ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ë‚¨ìš© | css/components ë˜ëŠ” í…Œë§ˆ |
| X-19 | Serviceì—ì„œ user.currentServer ì§ì ‘ ì°¸ì¡° | serverId ë§¤ê°œë³€ìˆ˜ |

---

## 5. ë„¤ì´ë° ì»¨ë²¤ì…˜

### 5.1 íŒŒì¼ ë„¤ì´ë°

| ëŒ€ìƒ | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| Store | `{domain}.store.js` | `user.store.js`, `migration.store.js` |
| Service | `{domain}.service.js` | `user.service.js`, `migration.service.js` |
| Action | `{domain}.actions.js` | `user.actions.js`, `migration.actions.js` |
| Core | `{module}.js` | `errorHandler.js`, `httpClient.js` |
| Utils | `{category}.utils.js` | `date.utils.js`, `format.utils.js` |
| Constants | `{category}.constants.js` | `api.constants.js`, `saas.constants.js` |
| Validators | `{category}.validators.js` | `common.validators.js` |
| Mixins | `{pattern}.mixin.js` | `pagination.mixin.js` |
| Page | `{domain}_{action}.html` | `table_init.html`, `migration.html` |
| Layout | `{purpose}.html` | `base.html`, `auth.html` |
| Partial | `_{name}.html` | `_pagination.html`, `_server_history.html` |
| Widget | `w_{name}.html` | `w_calendar.html`, `w_file_upload.html` |
| Email | `email_{purpose}.html` | `email_verify.html` |
| CSS | `{name}.css` (kebab) | `modal.css`, `wizard.css` |

### 5.2 Store ì†ì„± ë„¤ì´ë°

| ëŒ€ìƒ | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| store ì´ë¦„ | camelCase | `Alpine.store('serverHistory', {...})` |
| ë°ì´í„° ì†ì„± | camelCase | `sourceServerId`, `dbName` |
| ì¤‘ì²© ê·¸ë£¹ | ê°ì²´ ì†ì„± | `source.server`, `target.databases` |
| UI ìƒíƒœ | `ui.` ê·¸ë£¹ | `ui.modalOpen`, `ui.step` |
| ë‚´ë¶€ í”Œë˜ê·¸ | `_` ì ‘ë‘ì‚¬ | `_entered`, `_initialized` |
| ëª©ë¡ | ë³µìˆ˜í˜• | `tables`, `servers`, `favorites` |
| ë‹¨ì¼ | ë‹¨ìˆ˜í˜• | `currentServer`, `result` |
| Computed | `get` ì„œìˆ í˜• | `get hasSelection()`, `get progressPercent()` |

### 5.3 Action / Service ë„¤ì´ë°

| ëŒ€ìƒ | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| Action ê°ì²´ | `{Domain}Actions` | `MigrationActions`, `UserActions` |
| Service ê°ì²´ | `{Domain}Service` | `MigrationService`, `UserService` |
| ì§„ì… | `onEnter` | `onEnter(store)` |
| ì¡°íšŒ | `load{Resource}` | `loadTables(store)` |
| ìƒì„± | `create{Resource}` | `createTable(store)` |
| ê²€ì¦ (ë‚´ë¶€) | `_validate{Action}` | `_validateExecution(store)` |
| ì´ˆê¸°í™” | `reset` | `reset()` |
| Service ì¡°íšŒ | `fetch{Resource}` | `fetchTables(serverId, dbName)` |
| Service ìƒì„± | `create{Resource}` | `createTable(serverId, ...)` |
| Service ìˆ˜ì • | `update{Resource}` | `updateTable(serverId, ...)` |
| Service ì‚­ì œ | `delete{Resource}` | `deleteTable(serverId, ...)` |
| ì„œë²„ ì „í™˜ | `switchServer` | `switchServer(serverId)` |
| ì¦ê²¨ì°¾ê¸° | `toggleFavorite` | `toggleFavorite(store, server)` |
| ì´ë ¥ ê¸°ë¡ | `recordAccess` | `recordAccess(serverId, dbName, action)` |

### 5.4 URL ë„¤ì´ë°

| ëŒ€ìƒ | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| í˜ì´ì§€ URL | `/{domain}/{action}` | `/tables/init`, `/migration` |
| API | `/api/{domain}/{resource}` | `/api/servers/history` |
| `hx-target` | í•­ìƒ `#page-content` | â€” |

---

## 6. ë””ë ‰í„°ë¦¬ êµ¬ì¡°

```
project/
â”‚
â”œâ”€ templates/
â”‚   â”œâ”€ layouts/
â”‚   â”‚   â”œâ”€ base.html                     # ê¸°ë³¸ ë ˆì´ì•„ì›ƒ (Alpine/HTMX ì´ˆê¸°í™”)
â”‚   â”‚   â”œâ”€ auth.html                     # ì¸ì¦ ì „ìš© (ë¡œê·¸ì¸/ê°€ì…)
â”‚   â”‚   â””â”€ print.html                    # ì¸ì‡„ ì „ìš©
â”‚   â”‚
â”‚   â”œâ”€ pages/
â”‚   â”‚   â”œâ”€ dashboard.html                # ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”œâ”€ table_init.html               # í…Œì´ë¸” ì´ˆê¸°í™”
â”‚   â”‚   â”œâ”€ db_list.html                  # DB ëª©ë¡
â”‚   â”‚   â”œâ”€ migration.html                # ë§ˆì´ê·¸ë ˆì´ì…˜ (ìœ„ìë“œ)
â”‚   â”‚   â”œâ”€ server_manage.html            # ì„œë²„ ê´€ë¦¬
â”‚   â”‚   â””â”€ billing.html                  # í”Œëœ/ê²°ì œ
â”‚   â”‚
â”‚   â”œâ”€ components/
â”‚   â”‚   â”œâ”€ sidebar.html                  # HTMX ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”‚   â”œâ”€ modals.html                   # ê³µí†µ ëª¨ë‹¬
â”‚   â”‚   â”œâ”€ alert.html                    # ê³µí†µ ì•Œë¦¼
â”‚   â”‚   â””â”€ upgrade_modal.html            # í”Œëœ ì—…ê·¸ë ˆì´ë“œ ëª¨ë‹¬
â”‚   â”‚
â”‚   â”œâ”€ partials/
â”‚   â”‚   â”œâ”€ _pagination.html              # í˜ì´ì§€ë„¤ì´ì…˜
â”‚   â”‚   â”œâ”€ _search_bar.html              # ê²€ìƒ‰ ì…ë ¥
â”‚   â”‚   â”œâ”€ _table_header.html            # ì •ë ¬ í—¤ë”
â”‚   â”‚   â”œâ”€ _empty_state.html             # ë°ì´í„° ì—†ìŒ
â”‚   â”‚   â”œâ”€ _breadcrumb.html              # ê²½ë¡œ í‘œì‹œ
â”‚   â”‚   â”œâ”€ _server_selector.html         # DB ì„œë²„ ì„ íƒ
â”‚   â”‚   â”œâ”€ _server_favorites.html        # ì¦ê²¨ì°¾ê¸° ëª©ë¡
â”‚   â”‚   â”œâ”€ _server_history.html          # ì ‘ì† ì´ë ¥
â”‚   â”‚   â”œâ”€ _frequent_servers.html        # ìì£¼ ì‚¬ìš© ì„œë²„
â”‚   â”‚   â”œâ”€ _feature_lock.html            # ê¸°ëŠ¥ ì ê¸ˆ ì•ˆë‚´
â”‚   â”‚   â””â”€ _usage_bar.html              # ì‚¬ìš©ëŸ‰ í‘œì‹œ
â”‚   â”‚
â”‚   â”œâ”€ widgets/
â”‚   â”‚   â”œâ”€ w_calendar.html
â”‚   â”‚   â”œâ”€ w_file_upload.html
â”‚   â”‚   â””â”€ w_data_grid.html
â”‚   â”‚
â”‚   â””â”€ emails/
â”‚       â”œâ”€ email_verify.html
â”‚       â””â”€ email_password_reset.html
â”‚
â”œâ”€ static/
â”‚   â”œâ”€ js/
â”‚   â”‚   â”œâ”€ core/
â”‚   â”‚   â”‚   â”œâ”€ errorHandler.js           # ì—ëŸ¬ í•¸ë“¤ë§ (SaaS ì—ëŸ¬ í¬í•¨)
â”‚   â”‚   â”‚   â”œâ”€ httpClient.js             # HTTP ë˜í¼ (CSRF ìë™)
â”‚   â”‚   â”‚   â””â”€ htmxConfig.js             # HTMX ì„¤ì •
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ constants/
â”‚   â”‚   â”‚   â”œâ”€ api.constants.js          # API URL, íƒ€ì„ì•„ì›ƒ
â”‚   â”‚   â”‚   â”œâ”€ ui.constants.js           # í˜ì´ì§€ í¬ê¸°, í‚¤ì½”ë“œ
â”‚   â”‚   â”‚   â”œâ”€ message.constants.js      # ì‚¬ìš©ì ë©”ì‹œì§€
â”‚   â”‚   â”‚   â”œâ”€ saas.constants.js         # í”Œëœ, í•œë„
â”‚   â”‚   â”‚   â””â”€ features.constants.js     # ê¸°ëŠ¥ë³„ ì½”ë“œ, í”Œëœ ë§¤í•‘
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ utils/
â”‚   â”‚   â”‚   â”œâ”€ date.utils.js             # ë‚ ì§œ í¬ë§·/íŒŒì‹±/ë¹„êµ/duration
â”‚   â”‚   â”‚   â”œâ”€ format.utils.js           # ìˆ«ìÂ·í†µí™”Â·í¼ì„¼íŠ¸Â·íŒŒì¼í¬ê¸°
â”‚   â”‚   â”‚   â”œâ”€ string.utils.js           # truncate, mask, isEmpty
â”‚   â”‚   â”‚   â””â”€ dom.utils.js             # ë””ë°”ìš´ìŠ¤, ìŠ¤í¬ë¡¤, í¬ì»¤ìŠ¤
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ validators/
â”‚   â”‚   â”‚   â”œâ”€ common.validators.js      # ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, í•„ìˆ˜ê°’
â”‚   â”‚   â”‚   â””â”€ business.validators.js    # ì‚¬ì—…ìë²ˆí˜¸, ë²•ì¸ë²ˆí˜¸
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ mixins/
â”‚   â”‚   â”‚   â”œâ”€ pagination.mixin.js
â”‚   â”‚   â”‚   â”œâ”€ search.mixin.js
â”‚   â”‚   â”‚   â”œâ”€ sortable.mixin.js
â”‚   â”‚   â”‚   â””â”€ selectable.mixin.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ stores/
â”‚   â”‚   â”‚   â”œâ”€ user.store.js             # ì‚¬ìš©ì í”„ë¡œí•„, ì„œë²„ ëª©ë¡, ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€ usage.store.js            # ì‚¬ìš©ëŸ‰ ì¶”ì 
â”‚   â”‚   â”‚   â”œâ”€ serverHistory.store.js    # ì ‘ì† ì´ë ¥, ì¦ê²¨ì°¾ê¸°
â”‚   â”‚   â”‚   â”œâ”€ common.store.js           # ê³µí†µ UI ìƒíƒœ
â”‚   â”‚   â”‚   â”œâ”€ migration.store.js        # Source/Target ë…ë¦½ ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€ tableInit.store.js
â”‚   â”‚   â”‚   â””â”€ dbHealth.store.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ services/
â”‚   â”‚   â”‚   â”œâ”€ user.service.js
â”‚   â”‚   â”‚   â”œâ”€ usage.service.js
â”‚   â”‚   â”‚   â”œâ”€ serverHistory.service.js
â”‚   â”‚   â”‚   â”œâ”€ auth.service.js
â”‚   â”‚   â”‚   â”œâ”€ migration.service.js      # serverId ë§¤ê°œë³€ìˆ˜
â”‚   â”‚   â”‚   â”œâ”€ tableInit.service.js
â”‚   â”‚   â”‚   â””â”€ db.service.js
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€ actions/
â”‚   â”‚       â”œâ”€ user.actions.js           # ì„œë²„ ì „í™˜, Store ì´ˆê¸°í™”
â”‚   â”‚       â”œâ”€ usage.actions.js
â”‚   â”‚       â”œâ”€ serverHistory.actions.js  # ì´ë ¥ ê¸°ë¡, ì¦ê²¨ì°¾ê¸°
â”‚   â”‚       â”œâ”€ migration.actions.js      # ìœ„ìë“œ ì œì–´, Source/Target
â”‚   â”‚       â”œâ”€ tableInit.actions.js
â”‚   â”‚       â””â”€ db.actions.js
â”‚   â”‚
â”‚   â”œâ”€ css/
â”‚   â”‚   â”œâ”€ themes/
â”‚   â”‚   â”‚   â”œâ”€ variables.css
â”‚   â”‚   â”‚   â”œâ”€ light.css
â”‚   â”‚   â”‚   â””â”€ dark.css
â”‚   â”‚   â”œâ”€ components/
â”‚   â”‚   â”‚   â”œâ”€ modal.css, alert.css, table.css, form.css
â”‚   â”‚   â”‚   â”œâ”€ button.css, sidebar.css, pagination.css
â”‚   â”‚   â”‚   â”œâ”€ wizard.css, progress.css
â”‚   â”‚   â”‚   â”œâ”€ favorites.css, history.css
â”‚   â”‚   â”‚   â”œâ”€ feature-lock.css, usage-bar.css
â”‚   â”‚   â”‚   â””â”€ server-selector.css, badge.css
â”‚   â”‚   â”œâ”€ base.css
â”‚   â”‚   â”œâ”€ layout.css
â”‚   â”‚   â””â”€ utilities.css
â”‚   â”‚
â”‚   â”œâ”€ images/
â”‚   â”‚   â”œâ”€ logo/
â”‚   â”‚   â”œâ”€ icons/
â”‚   â”‚   â””â”€ bg/
â”‚   â”‚
â”‚   â””â”€ vendor/
â”‚       â”œâ”€ alpine/
â”‚       â”œâ”€ htmx/
â”‚       â””â”€ README.md
```

---

## 7. Core ê³„ì¸µ ì„¤ê³„ í‘œì¤€

### 7.1 base.html ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìˆœì„œ

```html
<head>
  <meta name="csrf-token" content="{{ csrf_token }}">
  <link rel="stylesheet" href="/static/css/themes/variables.css">
  <link rel="stylesheet" href="/static/css/themes/light.css" id="theme-css">
  <link rel="stylesheet" href="/static/css/base.css">
  <link rel="stylesheet" href="/static/css/layout.css">
  <!-- components/*.css -->
  <link rel="stylesheet" href="/static/css/utilities.css">
</head>

<!-- Phase 0: Vendor -->
<script defer src="/static/vendor/alpine/alpine.min.js"></script>
<script defer src="/static/vendor/htmx/htmx.min.js"></script>
<!-- Phase 1: Constants -->
<script defer src="/static/js/constants/api.constants.js"></script>
<script defer src="/static/js/constants/ui.constants.js"></script>
<script defer src="/static/js/constants/message.constants.js"></script>
<script defer src="/static/js/constants/saas.constants.js"></script>
<script defer src="/static/js/constants/features.constants.js"></script>
<!-- Phase 2: Utils -->
<script defer src="/static/js/utils/date.utils.js"></script>
<script defer src="/static/js/utils/format.utils.js"></script>
<script defer src="/static/js/utils/string.utils.js"></script>
<script defer src="/static/js/utils/dom.utils.js"></script>
<!-- Phase 3: Validators -->
<script defer src="/static/js/validators/common.validators.js"></script>
<script defer src="/static/js/validators/business.validators.js"></script>
<!-- Phase 4: Core -->
<script defer src="/static/js/core/errorHandler.js"></script>
<script defer src="/static/js/core/httpClient.js"></script>
<script defer src="/static/js/core/htmxConfig.js"></script>
<!-- Phase 5: Mixins -->
<script defer src="/static/js/mixins/pagination.mixin.js"></script>
<script defer src="/static/js/mixins/search.mixin.js"></script>
<script defer src="/static/js/mixins/sortable.mixin.js"></script>
<script defer src="/static/js/mixins/selectable.mixin.js"></script>
<!-- Phase 6: Stores -->
<script defer src="/static/js/stores/user.store.js"></script>
<script defer src="/static/js/stores/usage.store.js"></script>
<script defer src="/static/js/stores/serverHistory.store.js"></script>
<script defer src="/static/js/stores/common.store.js"></script>
<script defer src="/static/js/stores/migration.store.js"></script>
<script defer src="/static/js/stores/tableInit.store.js"></script>
<!-- Phase 7: Services -->
<script defer src="/static/js/services/user.service.js"></script>
<script defer src="/static/js/services/usage.service.js"></script>
<script defer src="/static/js/services/serverHistory.service.js"></script>
<script defer src="/static/js/services/migration.service.js"></script>
<script defer src="/static/js/services/tableInit.service.js"></script>
<!-- Phase 8: Actions -->
<script defer src="/static/js/actions/user.actions.js"></script>
<script defer src="/static/js/actions/usage.actions.js"></script>
<script defer src="/static/js/actions/serverHistory.actions.js"></script>
<script defer src="/static/js/actions/migration.actions.js"></script>
<script defer src="/static/js/actions/tableInit.actions.js"></script>
```

### 7.2 ErrorHandler

```js
window.ErrorHandler = {
  handle(error, store, context = '') {
    console.error(`[${context}]`, error)
    store.loading = false

    if (error.status === 401) return this._handleUnauthorized()
    if (error.status === 402) return this._handlePaymentRequired(store)
    if (error.status === 403) return this._handleForbidden(store)
    if (error.status === 408) return this.showError(store, MESSAGE.ERROR_TIMEOUT)
    if (error.status === 422) return this._handleValidation(error, store)
    if (error.status === 429) return this._handleRateLimit(error, store)
    if (error.status === 503) return this._handleMaintenance(store)

    this.showError(store, error.message || MESSAGE.ERROR_DEFAULT)
    this._report(error, context)
  },

  _handleUnauthorized() {
    window.location.href = `${API.AUTH_LOGIN}?reason=session_expired`
  },
  _handlePaymentRequired(store) {
    store.ui.showAlert = true
    store.ui.alertData = {
      type: 'upgrade', title: 'í”Œëœ ì—…ê·¸ë ˆì´ë“œ í•„ìš”',
      message: MESSAGE.ERROR_PAYMENT_REQUIRED,
      action: { label: 'ì—…ê·¸ë ˆì´ë“œ', url: SAAS.UPGRADE_URL }
    }
  },
  _handleForbidden(store)  { this.showError(store, MESSAGE.ERROR_FORBIDDEN) },
  _handleValidation(error, store) {
    store.ui.validationErrors = error.details || {}
    this.showError(store, MESSAGE.ERROR_VALIDATION)
  },
  _handleRateLimit(error, store) {
    const retry = error.retryAfter || 60
    this.showError(store, `ìš”ì²­ í•œë„ ì´ˆê³¼. ${retry}ì´ˆ í›„ ì¬ì‹œë„í•´ ì£¼ì„¸ìš”.`)
  },
  _handleMaintenance(store) {
    store.ui.showAlert = true
    store.ui.alertData = { type: 'maintenance', title: 'ì„œë¹„ìŠ¤ ì ê²€', message: MESSAGE.ERROR_MAINTENANCE }
  },

  showError(store, message) {
    store.ui.showAlert = true
    store.ui.alertData = { type: 'error', title: 'ì˜¤ë¥˜', message }
  },
  showSuccess(store, message) {
    store.ui.showAlert = true
    store.ui.alertData = { type: 'success', title: 'ì™„ë£Œ', message }
  },

  _report(error, context) {
    if (!window.__PROD__) return
    const user = Alpine.store('user')
    fetch('/api/error-report', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        context, message: error.message, status: error.status,
        userId: user?.profile?.id, plan: user?.profile?.plan,
        url: window.location.href, timestamp: new Date().toISOString()
      })
    }).catch(() => {})
  }
}
```

### 7.3 HttpClient

```js
window.HttpClient = {
  TIMEOUT: API.TIMEOUT_DEFAULT,
  _getCsrfToken() {
    return document.querySelector('meta[name="csrf-token"]')?.content || ''
  },
  _getHeaders() {
    return {
      'Content-Type': 'application/json',
      'X-CSRF-Token': this._getCsrfToken(),
      'X-Requested-With': 'XMLHttpRequest'
    }
  },
  async request(url, options = {}) {
    const controller = new AbortController()
    const timeout = setTimeout(() => controller.abort(), options.timeout || this.TIMEOUT)
    try {
      const res = await fetch(url, {
        ...options,
        headers: { ...this._getHeaders(), ...options.headers },
        signal: controller.signal
      })
      if (!res.ok) {
        const body = await res.json().catch(() => ({}))
        const error = new Error(body.message || `HTTP ${res.status}`)
        error.status = res.status
        error.details = body.details || null
        error.retryAfter = body.retryAfter || null
        throw error
      }
      return res.json()
    } catch (error) {
      if (error.name === 'AbortError') {
        const e = new Error(MESSAGE.ERROR_TIMEOUT); e.status = 408; throw e
      }
      throw error
    } finally { clearTimeout(timeout) }
  },
  async get(url, opts = {})        { return this.request(url, { method: 'GET', ...opts }) },
  async post(url, data, opts = {}) { return this.request(url, { method: 'POST', body: JSON.stringify(data), ...opts }) },
  async put(url, data, opts = {})  { return this.request(url, { method: 'PUT', body: JSON.stringify(data), ...opts }) },
  async delete(url, opts = {})     { return this.request(url, { method: 'DELETE', ...opts }) }
}
```

### 7.4 HtmxConfig

```js
document.addEventListener('DOMContentLoaded', () => {
  document.body.addEventListener('htmx:configRequest', (e) => {
    const token = document.querySelector('meta[name="csrf-token"]')?.content
    if (token) e.detail.headers['X-CSRF-Token'] = token
  })
  document.body.addEventListener('htmx:responseError', (e) => {
    const status = e.detail.xhr.status
    if (status === 401) window.location.href = `${API.AUTH_LOGIN}?reason=session_expired`
    if (status === 403) {
      const common = Alpine.store('common')
      if (common) ErrorHandler.showError(common, MESSAGE.ERROR_FORBIDDEN)
    }
  })
  document.body.addEventListener('htmx:afterSwap', (e) => {
    if (e.detail.target.id === 'page-content') e.detail.target.scrollTop = 0
  })
})
```

**HTMX ì´ë²¤íŠ¸ í—ˆìš©/ê¸ˆì§€:**

| ì´ë²¤íŠ¸ | í—ˆìš© | ìš©ë„ |
|--------|------|------|
| `htmx:configRequest` | âœ… | CSRF ì£¼ì… |
| `htmx:responseError` | âœ… | 401/403 ì²˜ë¦¬ |
| `htmx:afterSwap` | âš ï¸ ì œí•œ | ìŠ¤í¬ë¡¤ ì´ˆê¸°í™”ë§Œ |
| `htmx:beforeSwap` / `afterSettle` / `beforeRequest` | âŒ | |

---

## 8. Constants ì„¤ê³„ í‘œì¤€

ConstantsëŠ” **ê°’ë§Œ ì •ì˜**í•œë‹¤. ë¡œì§Â·í•¨ìˆ˜ ê¸ˆì§€.

```js
// api.constants.js
window.API = {
  BASE_URL: '/api',
  AUTH_LOGIN: '/auth/login',
  TIMEOUT_DEFAULT: 30000,
  TIMEOUT_BULK: 60000,
  TIMEOUT_UPLOAD: 120000
}

// ui.constants.js
window.UI = {
  PAGE_SIZE: 20,
  PAGE_SIZE_OPTIONS: [10, 20, 50, 100],
  DEBOUNCE_MS: 300,
  TOAST_DURATION: 3000,
  KEY: { ENTER: 'Enter', ESCAPE: 'Escape', TAB: 'Tab' }
}

// message.constants.js
window.MESSAGE = {
  ERROR_DEFAULT: 'ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
  ERROR_TIMEOUT: 'ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.',
  ERROR_FORBIDDEN: 'ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  ERROR_VALIDATION: 'ì…ë ¥ê°’ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.',
  ERROR_PAYMENT_REQUIRED: 'í˜„ì¬ í”Œëœì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í”Œëœì„ ì—…ê·¸ë ˆì´ë“œí•´ ì£¼ì„¸ìš”.',
  ERROR_MAINTENANCE: 'ì‹œìŠ¤í…œ ì ê²€ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
  SUCCESS_CREATE: 'ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
  SUCCESS_UPDATE: 'ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
  SUCCESS_DELETE: 'ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
  CONFIRM_DELETE: 'ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  REQUIRED: (field) => `${field}ì€(ëŠ”) í•„ìˆ˜ í•­ëª©ì…ë‹ˆë‹¤.`,
  MAX_LENGTH: (field, max) => `${field}ì€(ëŠ”) ${max}ì ì´í•˜ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”.`,
  CONNECTION_SUCCESS: 'ì—°ê²°ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.',
  CONNECTION_FAILED: 'ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ‘ì† ì •ë³´ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.',
  USAGE_LIMIT_WARNING: (r) => `${r} ì‚¬ìš©ëŸ‰ì´ 80%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.`,
  USAGE_LIMIT_REACHED: (r) => `${r} í•œë„ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤. í”Œëœì„ ì—…ê·¸ë ˆì´ë“œí•´ ì£¼ì„¸ìš”.`
}

// saas.constants.js
window.SAAS = {
  PLANS: ['free', 'pro', 'enterprise'],
  PLAN_LABELS: { free: 'Free', pro: 'Pro', enterprise: 'Enterprise' },
  LIMITS: {
    free:       { servers: 1,  storageMB: 100,   aiQueriesPerDay: 0 },
    pro:        { servers: 10, storageMB: 5120,   aiQueriesPerDay: 100 },
    enterprise: { servers: -1, storageMB: -1,     aiQueriesPerDay: -1 }
  },
  UPGRADE_URL: '/billing/upgrade'
}

// features.constants.js
window.FEATURE = {
  DB_VIEW: 'db:view',          DB_BACKUP: 'db:backup',
  TABLE_INIT: 'table:init',    DATA_MIGRATION: 'data:migration',
  MULTI_SERVER: 'multi:server', AI_QUERY: 'ai:query',
  BATCH_PROCESS: 'batch:process', AUDIT_LOG: 'audit:log', API_ACCESS: 'api:access'
}
window.PLAN_FEATURES = {
  free:       [FEATURE.DB_VIEW, FEATURE.DB_BACKUP],
  pro:        [FEATURE.DB_VIEW, FEATURE.DB_BACKUP, FEATURE.TABLE_INIT,
               FEATURE.DATA_MIGRATION, FEATURE.MULTI_SERVER, FEATURE.AI_QUERY],
  enterprise: [FEATURE.DB_VIEW, FEATURE.DB_BACKUP, FEATURE.TABLE_INIT,
               FEATURE.DATA_MIGRATION, FEATURE.MULTI_SERVER, FEATURE.AI_QUERY,
               FEATURE.BATCH_PROCESS, FEATURE.AUDIT_LOG, FEATURE.API_ACCESS]
}
```

---

## 9. Utils / Validators ì„¤ê³„ í‘œì¤€

ìˆœìˆ˜ í•¨ìˆ˜ë§Œ ì •ì˜. store/DOM/fetch ì°¸ì¡° ê¸ˆì§€.

```js
// date.utils.js
window.DateUtils = {
  format(date, pattern = 'YYYY-MM-DD') { /* ... */ },
  relative(date) { /* '3ë¶„ ì „', '2ì‹œê°„ ì „' */ },
  isToday(date) { /* boolean */ },
  formatDuration(ms) {
    const s = Math.floor(ms / 1000)
    if (s < 60) return `${s}ì´ˆ`
    const m = Math.floor(s / 60)
    if (m < 60) return `${m}ë¶„ ${s % 60}ì´ˆ`
    const h = Math.floor(m / 60)
    return `${h}ì‹œê°„ ${m % 60}ë¶„`
  }
}

// format.utils.js
window.FormatUtils = {
  number(v) { return v == null ? '' : Number(v).toLocaleString('ko-KR') },
  currency(v) { return this.number(v) + 'ì›' },
  percent(v, d = 1) { return Number(v).toFixed(d) + '%' },
  fileSize(bytes) {
    if (bytes === 0) return '0 B'
    const u = ['B','KB','MB','GB']
    const i = Math.floor(Math.log(bytes) / Math.log(1024))
    return (bytes / Math.pow(1024, i)).toFixed(1) + ' ' + u[i]
  }
}

// string.utils.js
window.StringUtils = {
  truncate(s, max, suffix = '...') { return !s || s.length <= max ? s : s.slice(0, max) + suffix },
  isEmpty(v) { return v == null || String(v).trim() === '' },
  mask(s, start = 1, end = 0, c = '*') { /* masking */ }
}

// dom.utils.js
window.DomUtils = {
  debounce(fn, delay = UI.DEBOUNCE_MS) {
    let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), delay) }
  },
  scrollToTop(el = window) { el.scrollTo({ top: 0, behavior: 'smooth' }) },
  focusDelayed(sel, delay = 100) { setTimeout(() => document.querySelector(sel)?.focus(), delay) }
}

// common.validators.js
window.CommonValidators = {
  required(value, fieldName) {
    const valid = !StringUtils.isEmpty(value)
    return { valid, message: valid ? '' : MESSAGE.REQUIRED(fieldName) }
  },
  maxLength(value, max, fieldName) {
    const valid = !value || String(value).length <= max
    return { valid, message: valid ? '' : MESSAGE.MAX_LENGTH(fieldName, max) }
  },
  isEmail(v) { const p = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; return { valid: p.test(v), message: p.test(v) ? '' : 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì´ ì•„ë‹™ë‹ˆë‹¤.' } },
  isPhoneNumber(v) { const p = /^(01[016789]|02|0[3-9]\d)-?\d{3,4}-?\d{4}$/; return { valid: p.test(v), message: p.test(v) ? '' : 'ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ê°€ ì•„ë‹™ë‹ˆë‹¤.' } }
}

// business.validators.js
window.BusinessValidators = {
  validateBizNumber(v) { /* ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ 10ìë¦¬ ê²€ì¦ */ },
  validateCorpNumber(v) { /* ë²•ì¸ë“±ë¡ë²ˆí˜¸ 13ìë¦¬ ê²€ì¦ */ }
}
```

---

## 10. Mixins ì„¤ê³„ í‘œì¤€

| âœ… í—ˆìš© | âŒ ê¸ˆì§€ |
|---------|---------|
| x-data ìƒíƒœ + ë©”ì„œë“œ | store ìƒì„± |
| Action í˜¸ì¶œ | ì§ì ‘ fetch |
| Utils/Constants ì°¸ì¡° | DOM ì§ì ‘ ì¡°ì‘ |

```js
// pagination.mixin.js
window.PaginationMixin = (config = {}) => ({
  page: 1, pageSize: config.pageSize || UI.PAGE_SIZE, totalCount: 0,
  get totalPages() { return Math.ceil(this.totalCount / this.pageSize) },
  get hasNextPage() { return this.page < this.totalPages },
  get hasPrevPage() { return this.page > 1 },
  goToPage(n) { if (n >= 1 && n <= this.totalPages) { this.page = n; if (config.onChange) config.onChange(this.page) } },
  nextPage() { this.goToPage(this.page + 1) },
  prevPage() { this.goToPage(this.page - 1) },
  resetPage() { this.page = 1 }
})

// search.mixin.js
window.SearchMixin = (config = {}) => ({
  searchKeyword: '', searchField: config.defaultField || 'all',
  searchFields: config.fields || [],
  get hasKeyword() { return !StringUtils.isEmpty(this.searchKeyword) },
  clearSearch() { this.searchKeyword = ''; if (config.onClear) config.onClear() },
  onSearch: DomUtils.debounce(function() { if (config.onSearch) config.onSearch(this.searchKeyword, this.searchField) })
})

// sortable.mixin.js
window.SortableMixin = (config = {}) => ({
  sortField: config.defaultField || '', sortOrder: config.defaultOrder || 'asc',
  toggleSort(field) {
    this.sortOrder = this.sortField === field ? (this.sortOrder === 'asc' ? 'desc' : 'asc') : 'asc'
    this.sortField = field
    if (config.onChange) config.onChange(this.sortField, this.sortOrder)
  }
})

// selectable.mixin.js
window.SelectableMixin = (config = {}) => ({
  selectedItems: [],
  get selectedCount() { return this.selectedItems.length },
  get hasSelection() { return this.selectedItems.length > 0 },
  isSelected(item) { const k = config.keyField || 'id'; return this.selectedItems.some(s => s[k] === item[k]) },
  toggleSelect(item) {
    const k = config.keyField || 'id'
    const i = this.selectedItems.findIndex(s => s[k] === item[k])
    i >= 0 ? this.selectedItems.splice(i, 1) : this.selectedItems.push(item)
  },
  selectAll(items) { this.selectedItems = [...items] },
  clearSelection() { this.selectedItems = [] },
  toggleSelectAll(items) { this.selectedItems.length === items.length ? this.clearSelection() : this.selectAll(items) }
})
```

---

## 11. Store ì„¤ê³„ í‘œì¤€

### 11.1 Store ì›ì¹™

| ë²ˆí˜¸ | ì›ì¹™ |
|------|------|
| S-01 | StoreëŠ” ìƒíƒœ ì €ì¥ë§Œ (ë¡œì§Â·í†µì‹  ê¸ˆì§€) |
| S-02 | layouts/base.htmlì—ì„œë§Œ ë“±ë¡ |
| S-03 | ë„ë©”ì¸ë‹¹ 1 Store, 1 íŒŒì¼ |
| S-04 | Store ê°„ ì§ì ‘ ì°¸ì¡° ê¸ˆì§€ (Actionì—ì„œ ì¡°í•©) |
| S-05 | ì´ˆê¸° ìƒíƒœëŠ” Defaults í•¨ìˆ˜ë¡œ ë¶„ë¦¬ |
| S-06 | íŒŒìƒ ë°ì´í„°ëŠ” getter |

### 11.2 User Store (SaaS í•µì‹¬)

```js
window.UserStoreDefaults = () => ({
  profile: { id: null, email: '', name: '', plan: 'free' },
  servers: [],
  currentServer: null,
  preferences: { theme: 'light', pageSize: 20, language: 'ko', sidebarCollapsed: false },
  session: { authenticated: false, expiresAt: null },
  _initialized: false
})
document.addEventListener('alpine:init', () => {
  Alpine.store('user', {
    ...UserStoreDefaults(),
    get isFreePlan() { return this.profile.plan === 'free' },
    get isProOrAbove() { return ['pro','enterprise'].includes(this.profile.plan) },
    canUse(feature) { return (PLAN_FEATURES[this.profile.plan] || []).includes(feature) },
    get hasServer() { return this.currentServer !== null },
    get serverCount() { return this.servers.length }
  })
})
```

### 11.3 Usage Store

```js
window.UsageStoreDefaults = () => ({
  servers: { used: 0, limit: 0 },
  storage: { used: 0, limit: 0 },
  aiQueries: { used: 0, limit: 0 },
  _entered: false
})
document.addEventListener('alpine:init', () => {
  Alpine.store('usage', {
    ...UsageStoreDefaults(),
    get serverUsagePercent() { return this.servers.limit > 0 ? Math.round(this.servers.used / this.servers.limit * 100) : 0 },
    get isServerLimitReached() { return this.servers.limit > 0 && this.servers.used >= this.servers.limit }
  })
})
```

### 11.4 ServerHistory Store

```js
window.ServerHistoryStoreDefaults = () => ({
  history: [],     // [{serverId, serverName, host, dbType, dbName, accessedAt, action}]
  favorites: [],   // [{serverId, serverName, host, dbType, note, color, addedAt}]
  maxHistoryCount: 50, loading: false, _entered: false
})
document.addEventListener('alpine:init', () => {
  Alpine.store('serverHistory', {
    ...ServerHistoryStoreDefaults(),
    get recentHistory() { return this.history.slice(0, 10) },
    isFavorite(serverId) { return this.favorites.some(f => f.serverId === serverId) },
    get favoriteCount() { return this.favorites.length },
    get frequentServers() {
      const c = {}
      this.history.forEach(h => { c[h.serverId] = (c[h.serverId]||0)+1 })
      return Object.entries(c).sort((a,b) => b[1]-a[1]).slice(0,5)
        .map(([id,cnt]) => {
          const h = this.history.find(x => x.serverId === id)
          return { serverId: id, serverName: h?.serverName, host: h?.host, count: cnt }
        })
    }
  })
})
```

### 11.5 Migration Store (ë©€í‹° ì„œë²„ ì°¸ì¡°)

```js
window.MigrationStoreDefaults = () => ({
  source: { server: null, databases: [], selectedDb: '', tables: [], selectedTables: [] },
  target: { server: null, databases: [], selectedDb: '', tables: [], existingTableNames: [] },
  options: { mode: 'copy', ifExists: 'skip', includeData: true, includeIndexes: true },
  progress: { status: 'idle', current: 0, total: 0, currentTable: '', errors: [], startedAt: null, completedAt: null },
  loading: false,
  ui: { step: 1, showAlert: false, alertData: {}, validationErrors: {} },
  _entered: false
})
document.addEventListener('alpine:init', () => {
  Alpine.store('migration', {
    ...MigrationStoreDefaults(),
    get sourceReady() { return this.source.server && this.source.selectedDb },
    get hasSourceSelection() { return this.source.selectedTables.length > 0 },
    get targetReady() { return this.target.server && this.target.selectedDb },
    get conflictTables() { return this.source.selectedTables.filter(t => this.target.existingTableNames.includes(t)) },
    get hasConflicts() { return this.conflictTables.length > 0 },
    get isSameDatabase() { return this.source.server?.id === this.target.server?.id && this.source.selectedDb === this.target.selectedDb },
    get progressPercent() { return this.progress.total ? Math.round(this.progress.current / this.progress.total * 100) : 0 },
    get isRunning() { return this.progress.status === 'running' },
    get elapsedTime() {
      if (!this.progress.startedAt) return ''
      return DateUtils.formatDuration(new Date(this.progress.completedAt || new Date()) - new Date(this.progress.startedAt))
    }
  })
})
```

### 11.6 ë„ë©”ì¸ Store í‘œì¤€ í˜•íƒœ

```js
window.TableInitStoreDefaults = () => ({
  loading: false, tables: [], selectedTables: [], sourceDbName: '',
  ui: { modalOpen: false, showAlert: false, showConfirm: false,
        alertData: {}, confirmData: {}, validationErrors: {} },
  result: {}, _entered: false
})
document.addEventListener('alpine:init', () => {
  Alpine.store('tableInit', {
    ...TableInitStoreDefaults(),
    get selectedCount() { return this.selectedTables.length },
    get hasSelection() { return this.selectedTables.length > 0 }
  })
})
```

### 11.7 ì„œë²„ ì „í™˜ ì‹œ Store ì´ˆê¸°í™” ê·œì¹™

| Store | ì„œë²„ ì „í™˜ ì‹œ | ì´ìœ  |
|-------|------------|------|
| user | ìœ ì§€ | ì‚¬ìš©ì ì •ë³´ëŠ” ì„œë²„ ë¬´ê´€ |
| usage | ê°±ì‹  | ì„œë²„ë³„ ì‚¬ìš©ëŸ‰ ë°˜ì˜ |
| serverHistory | ìœ ì§€ | ì´ë ¥ì€ ì „ì²´ ì„œë²„ ëŒ€ìƒ |
| common | ìœ ì§€ | ê³µí†µ UI ìƒíƒœ |
| migration | **ì´ˆê¸°í™”** | ì´ì „ ì„œë²„ ë°ì´í„° ì œê±° |
| tableInit | **ì´ˆê¸°í™”** | ì´ì „ ì„œë²„ ë°ì´í„° ì œê±° |
| dbHealth | **ì´ˆê¸°í™”** | ì´ì „ ì„œë²„ ë°ì´í„° ì œê±° |

---

## 12. Service ì„¤ê³„ í‘œì¤€

### 12.1 ì›ì¹™

| ë²ˆí˜¸ | ì›ì¹™ |
|------|------|
| SV-01 | ëª¨ë“  APIëŠ” HttpClient ê²½ìœ  |
| SV-02 | ì‘ë‹µ ë°ì´í„°ë§Œ return (store ë³€ê²½ ê¸ˆì§€) |
| SV-03 | ì—ëŸ¬ catch ì•ˆ í•¨ (Actionìœ¼ë¡œ ì „íŒŒ) |
| SV-04 | URLì€ Serviceì—ì„œë§Œ ê´€ë¦¬ |
| SV-05 | API.BASE_URL ì‚¬ìš© |
| SV-06 | **serverIdë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ** ë°›ëŠ”ë‹¤ (currentServer ë¹„ì˜ì¡´) |

### 12.2 ì¼ë°˜ Service

```js
window.TableInitService = {
  async fetchTables(serverId, dbName) {
    return HttpClient.get(`${API.BASE_URL}/servers/${serverId}/databases/${dbName}/tables`)
  },
  async createTable(serverId, dbName, data) {
    return HttpClient.post(`${API.BASE_URL}/servers/${serverId}/databases/${dbName}/tables`, data)
  }
}
```

### 12.3 ë©€í‹° ì„œë²„ ì°¸ì¡° Service (ë§ˆì´ê·¸ë ˆì´ì…˜)

```js
window.MigrationService = {
  async fetchDatabases(serverId) {
    return HttpClient.get(`${API.BASE_URL}/servers/${serverId}/databases`)
  },
  async fetchTables(serverId, dbName) {
    return HttpClient.get(`${API.BASE_URL}/servers/${serverId}/databases/${dbName}/tables`)
  },
  async execute(payload) {
    return HttpClient.post(`${API.BASE_URL}/migration/execute`, payload, { timeout: API.TIMEOUT_BULK })
  }
}
```

### 12.4 SaaS Service

```js
window.UserService = {
  async getProfile() { return HttpClient.get(`${API.BASE_URL}/user/profile`) },
  async updatePreferences(prefs) { return HttpClient.put(`${API.BASE_URL}/user/preferences`, prefs) },
  async addServer(data) { return HttpClient.post(`${API.BASE_URL}/servers`, data) },
  async testConnection(data) { return HttpClient.post(`${API.BASE_URL}/servers/test`, data) },
  async updateLastServer(serverId) { return HttpClient.put(`${API.BASE_URL}/user/last-server`, { serverId }) }
}

window.ServerHistoryService = {
  async fetchHistory() { return HttpClient.get(`${API.BASE_URL}/servers/history`) },
  async recordAccess(data) { return HttpClient.post(`${API.BASE_URL}/servers/history`, data) },
  async fetchFavorites() { return HttpClient.get(`${API.BASE_URL}/servers/favorites`) },
  async addFavorite(data) { return HttpClient.post(`${API.BASE_URL}/servers/favorites`, data) },
  async removeFavorite(serverId) { return HttpClient.delete(`${API.BASE_URL}/servers/favorites/${serverId}`) },
  async updateFavorite(serverId, data) { return HttpClient.put(`${API.BASE_URL}/servers/favorites/${serverId}`, data) }
}

window.UsageService = {
  async getUsage() { return HttpClient.get(`${API.BASE_URL}/usage/current`) }
}
```

---

## 13. Action ì„¤ê³„ í‘œì¤€

### 13.1 ì›ì¹™

| ë²ˆí˜¸ | ê·œì¹™ |
|------|------|
| A-01 | try/catchëŠ” Actionì—ì„œë§Œ |
| A-02 | catch â†’ ErrorHandler.handle() |
| A-03 | finally â†’ store.loading = false |
| A-04 | ìœ íš¨ì„± â†’ _validate + Validators |
| A-05 | ë©”ì‹œì§€ â†’ MESSAGE ìƒìˆ˜ |
| A-06 | ë‹¤ë¥¸ store â†’ Alpine.store('other') |
| A-07 | í¬ë§· â†’ Utils |
| A-08 | **ê¸°ëŠ¥ ê¶Œí•œ â†’ user.canUse(FEATURE.xxx) 1ì°¨ ê²€ì¦** |
| A-09 | **DB ì‘ì—… ì‹œ â†’ ServerHistoryActions.recordAccess() ìë™ í˜¸ì¶œ** |

### 13.2 User Actions (ì„œë²„ ì „í™˜ + Store ì´ˆê¸°í™”)

```js
window.UserActions = {
  async initialize() {
    const user = Alpine.store('user')
    if (user._initialized) return
    user._initialized = true
    try {
      const data = await UserService.getProfile()
      user.profile = data.profile
      user.servers = data.servers
      user.preferences = data.preferences || user.preferences
      if (data.lastServerId) {
        const s = user.servers.find(x => x.id === data.lastServerId)
        if (s) user.currentServer = s
      }
    } catch (error) { ErrorHandler.handle(error, user, 'User.initialize') }
  },

  async switchServer(serverId) {
    const user = Alpine.store('user')
    const server = user.servers.find(s => s.id === serverId)
    if (!server) return
    user.currentServer = server
    this._resetDomainStores()
    await UserService.updateLastServer(serverId).catch(() => {})
  },

  _resetDomainStores() {
    if (window.TableInitStoreDefaults) Object.assign(Alpine.store('tableInit'), TableInitStoreDefaults())
    if (window.DbHealthStoreDefaults) Object.assign(Alpine.store('dbHealth'), DbHealthStoreDefaults())
    if (window.MigrationStoreDefaults) Object.assign(Alpine.store('migration'), MigrationStoreDefaults())
  },

  async addServer(serverData) {
    const user = Alpine.store('user')
    const limit = SAAS.LIMITS[user.profile.plan].servers
    if (limit > 0 && user.servers.length >= limit) {
      ErrorHandler.showError(user, MESSAGE.USAGE_LIMIT_REACHED('DB ì„œë²„'))
      return
    }
    user.loading = true
    try {
      const result = await UserService.addServer(serverData)
      user.servers.push(result)
      ErrorHandler.showSuccess(user, MESSAGE.SUCCESS_CREATE)
    } catch (error) { ErrorHandler.handle(error, user, 'User.addServer') }
    finally { user.loading = false }
  },

  async testConnection(serverData) {
    const user = Alpine.store('user')
    user.loading = true
    try {
      await UserService.testConnection(serverData)
      ErrorHandler.showSuccess(user, MESSAGE.CONNECTION_SUCCESS)
    } catch (error) { ErrorHandler.handle(error, user, 'User.testConnection') }
    finally { user.loading = false }
  }
}
```

### 13.3 ServerHistory Actions (ì´ë ¥ + ì¦ê²¨ì°¾ê¸°)

```js
window.ServerHistoryActions = {
  async onEnter() {
    const store = Alpine.store('serverHistory')
    if (store._entered) return
    store._entered = true
    await Promise.all([this.loadHistory(store), this.loadFavorites(store)])
  },
  async loadHistory(store) {
    try { store.history = await ServerHistoryService.fetchHistory() }
    catch (e) { ErrorHandler.handle(e, store, 'ServerHistory.loadHistory') }
  },
  async loadFavorites(store) {
    try { store.favorites = await ServerHistoryService.fetchFavorites() }
    catch (e) { ErrorHandler.handle(e, store, 'ServerHistory.loadFavorites') }
  },
  /** ë‹¤ë¥¸ Actionì—ì„œ í˜¸ì¶œ â€” fire-and-forget */
  async recordAccess(serverId, dbName, action) {
    const user = Alpine.store('user')
    const store = Alpine.store('serverHistory')
    const server = user.servers.find(s => s.id === serverId)
    if (!server) return
    const record = { serverId, serverName: server.name, host: server.host,
      dbType: server.dbType, dbName, action, accessedAt: new Date().toISOString() }
    store.history.unshift(record)
    if (store.history.length > store.maxHistoryCount) store.history = store.history.slice(0, store.maxHistoryCount)
    ServerHistoryService.recordAccess(record).catch(() => {})
  },
  async toggleFavorite(store, server) {
    try {
      if (store.isFavorite(server.id)) {
        await ServerHistoryService.removeFavorite(server.id)
        store.favorites = store.favorites.filter(f => f.serverId !== server.id)
      } else {
        const fav = await ServerHistoryService.addFavorite({
          serverId: server.id, serverName: server.name, host: server.host, dbType: server.dbType })
        store.favorites.push(fav)
      }
    } catch (e) { ErrorHandler.handle(e, store, 'ServerHistory.toggleFavorite') }
  },
  async clearHistory(store) {
    try { await ServerHistoryService.clearHistory(); store.history = []
      ErrorHandler.showSuccess(store, 'ì ‘ì† ì´ë ¥ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.') }
    catch (e) { ErrorHandler.handle(e, store, 'ServerHistory.clearHistory') }
  }
}
```

### 13.4 ë„ë©”ì¸ Action + ì´ë ¥ ì—°ë™ íŒ¨í„´

```js
window.TableInitActions = {
  async onEnter(store) {
    if (store._entered) return; store._entered = true
    await this.loadTables(store)
  },
  async loadTables(store) {
    const user = Alpine.store('user')
    if (!user.currentServer) return
    store.loading = true
    try {
      store.tables = await TableInitService.fetchTables(user.currentServer.id, store.sourceDbName)
      // ì´ë ¥ ìë™ ê¸°ë¡
      ServerHistoryActions.recordAccess(user.currentServer.id, store.sourceDbName, 'init')
    } catch (e) { ErrorHandler.handle(e, store, 'TableInit.loadTables') }
    finally { store.loading = false }
  },
  async createTable(store) {
    if (!this._validateCreate(store)) return
    if (!Alpine.store('user').canUse(FEATURE.TABLE_INIT)) {
      ErrorHandler.showError(store, MESSAGE.ERROR_PAYMENT_REQUIRED); return
    }
    store.loading = true
    try {
      store.result = await TableInitService.createTable(
        Alpine.store('user').currentServer.id, store.sourceDbName, { tables: store.selectedTables })
      ErrorHandler.showSuccess(store, `${store.selectedTables.length}ê°œ ${MESSAGE.SUCCESS_CREATE}`)
    } catch (e) { ErrorHandler.handle(e, store, 'TableInit.createTable') }
    finally { store.loading = false }
  },
  _validateCreate(store) {
    store.ui.validationErrors = {}
    const db = CommonValidators.required(store.sourceDbName, 'DB')
    if (!db.valid) store.ui.validationErrors.sourceDbName = db.message
    if (store.selectedTables.length === 0) store.ui.validationErrors.selectedTables = '1ê°œ ì´ìƒ ì„ íƒ'
    const err = Object.keys(store.ui.validationErrors).length > 0
    if (err) ErrorHandler.showError(store, MESSAGE.ERROR_VALIDATION)
    return !err
  },
  reset() { Object.assign(Alpine.store('tableInit'), TableInitStoreDefaults()) }
}
```

### 13.5 Migration Actions (ë©€í‹° ì„œë²„ ì°¸ì¡°)

```js
window.MigrationActions = {
  async onEnter(store) { if (store._entered) return; store._entered = true },

  async selectSourceServer(store, server) {
    store.source.server = server
    store.source.databases = []; store.source.selectedDb = ''
    store.source.tables = []; store.source.selectedTables = []
    store.loading = true
    try { store.source.databases = await MigrationService.fetchDatabases(server.id) }
    catch (e) { ErrorHandler.handle(e, store, 'Migration.selectSourceServer') }
    finally { store.loading = false }
  },
  async selectSourceDb(store, dbName) {
    store.source.selectedDb = dbName; store.source.tables = []; store.source.selectedTables = []
    store.loading = true
    try { store.source.tables = await MigrationService.fetchTables(store.source.server.id, dbName) }
    catch (e) { ErrorHandler.handle(e, store, 'Migration.selectSourceDb') }
    finally { store.loading = false }
  },
  async selectTargetServer(store, server) {
    store.target.server = server
    store.target.databases = []; store.target.selectedDb = ''
    store.target.tables = []; store.target.existingTableNames = []
    store.loading = true
    try { store.target.databases = await MigrationService.fetchDatabases(server.id) }
    catch (e) { ErrorHandler.handle(e, store, 'Migration.selectTargetServer') }
    finally { store.loading = false }
  },
  async selectTargetDb(store, dbName) {
    store.target.selectedDb = dbName
    store.loading = true
    try {
      store.target.tables = await MigrationService.fetchTables(store.target.server.id, dbName)
      store.target.existingTableNames = store.target.tables.map(t => t.name)
    } catch (e) { ErrorHandler.handle(e, store, 'Migration.selectTargetDb') }
    finally { store.loading = false }
  },

  async execute(store) {
    if (!this._validate(store)) return
    if (!Alpine.store('user').canUse(FEATURE.DATA_MIGRATION)) {
      ErrorHandler.showError(store, MESSAGE.ERROR_PAYMENT_REQUIRED); return
    }
    store.progress = { status: 'running', current: 0, total: store.source.selectedTables.length,
      currentTable: '', errors: [], startedAt: new Date().toISOString(), completedAt: null }
    store.ui.step = 4
    try {
      const result = await MigrationService.execute({
        source: { serverId: store.source.server.id, dbName: store.source.selectedDb, tables: store.source.selectedTables },
        target: { serverId: store.target.server.id, dbName: store.target.selectedDb },
        options: { ...store.options }
      })
      store.progress.status = result.errors?.length ? 'failed' : 'completed'
      store.progress.current = result.processed || store.progress.total
      store.progress.errors = result.errors || []
      store.progress.completedAt = new Date().toISOString()
      store.ui.step = 5
      // ì´ë ¥ ê¸°ë¡
      ServerHistoryActions.recordAccess(store.source.server.id, store.source.selectedDb, 'migration')
      ServerHistoryActions.recordAccess(store.target.server.id, store.target.selectedDb, 'migration')
    } catch (e) {
      store.progress.status = 'failed'; store.progress.completedAt = new Date().toISOString()
      ErrorHandler.handle(e, store, 'Migration.execute')
    }
  },

  _validate(store) {
    store.ui.validationErrors = {}
    if (!store.source.server) store.ui.validationErrors.source = 'Source ì„œë²„ í•„ìš”'
    if (!store.source.selectedDb) store.ui.validationErrors.sourceDb = 'Source DB í•„ìš”'
    if (!store.source.selectedTables.length) store.ui.validationErrors.tables = 'í…Œì´ë¸” ì„ íƒ í•„ìš”'
    if (!store.target.server) store.ui.validationErrors.target = 'Target ì„œë²„ í•„ìš”'
    if (!store.target.selectedDb) store.ui.validationErrors.targetDb = 'Target DB í•„ìš”'
    if (store.isSameDatabase) store.ui.validationErrors.targetDb = 'ë™ì¼ DB ë¶ˆê°€'
    const err = Object.keys(store.ui.validationErrors).length > 0
    if (err) ErrorHandler.showError(store, MESSAGE.ERROR_VALIDATION)
    return !err
  },

  nextStep(store) { if (store.ui.step < 4) store.ui.step++ },
  prevStep(store) { if (store.ui.step > 1) store.ui.step-- },
  reset() { Object.assign(Alpine.store('migration'), MigrationStoreDefaults()) }
}
```

---

## 14. ë¼ìš°íŒ… ì„¤ê³„ í‘œì¤€

ì„œë²„ URL + HTMXê°€ Router ì—­í• . SPA Router ì‚¬ìš© ì•ˆ í•¨.

### 14.1 Sidebar ë©”ë‰´

```html
<a hx-get="/tables/init" hx-target="#page-content" hx-swap="innerHTML"
   hx-push-url="true" data-nav-link="/tables/init" class="nav-link">í…Œì´ë¸” ì´ˆê¸°í™”</a>
```

### 14.2 HTMX ì†ì„± ê·œì¹™

| ì†ì„± | ê·œì¹™ |
|------|------|
| `hx-target` | í•­ìƒ `#page-content` |
| `hx-swap` | `innerHTML` |
| `hx-push-url` | í•„ìˆ˜ (ë’¤ë¡œê°€ê¸° ì§€ì›) |
| `<script>` | ì‘ë‹µì— í¬í•¨ ê¸ˆì§€ |

### 14.3 ì„œë²„ ë¼ìš°í„° ì‘ë‹µ

```python
@router.get("/tables/init")
async def table_init_page(request: Request):
    ctx = {"request": request}
    if request.headers.get("HX-Request"):
        return templates.TemplateResponse("pages/table_init.html", ctx)
    ctx["page"] = "pages/table_init.html"
    return templates.TemplateResponse("layouts/base.html", ctx)
```

### 14.4 ì§„ì…/ì¬ì§„ì…

```js
async onEnter(store) {
  if (store._entered) { await this.refreshData(store); return }
  store._entered = true
  await this.initialize(store)
}
```

### 14.5 URL ì œì–´ ê¸ˆì§€

```js
// âŒ ì „ë©´ ê¸ˆì§€
window.location.href = '/some/page'
history.pushState(...)
Alpine.store('router', { currentPage: '...' })

// âœ… ìœ ì¼í•œ ì˜ˆì™¸: ErrorHandler ì¸ì¦ ë§Œë£Œ
window.location.href = `${API.AUTH_LOGIN}?reason=session_expired`
```

---

## 15. UI ê³„ì¸µ ì„¤ê³„ í‘œì¤€

### 15.1 Page ê·œì¹™

| âœ… í—ˆìš© | âŒ ê¸ˆì§€ |
|---------|---------|
| `x-data`, `x-init`, `x-model`, `x-text`, `x-show`, `x-for` | `<script>`, `fetch`, `async` í•¨ìˆ˜ ì •ì˜ |
| `@click` â†’ Action í˜¸ì¶œ | store ìƒì„±, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| Mixin spread (`...PaginationMixin()`) | `window.alert`, `window.confirm` |
| `{% include 'partials/...' %}` | ì¸ë¼ì¸ JS ê³„ì‚° |

### 15.2 Partial

`_` ì ‘ë‘ì‚¬. ìì²´ `x-data` ê¸ˆì§€. ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë™ì‘.

```html
<!-- partials/_pagination.html -->
<nav class="c-pagination" x-show="totalPages > 1">
  <button @click="prevPage()" :disabled="!hasPrevPage">ì´ì „</button>
  <span x-text="page + ' / ' + totalPages"></span>
  <button @click="nextPage()" :disabled="!hasNextPage">ë‹¤ìŒ</button>
</nav>

<!-- partials/_empty_state.html -->
<div class="c-empty-state" x-show="store.tables.length === 0 && !store.loading">
  <p>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
</div>
```

### 15.3 Widget

`w_` ì ‘ë‘ì‚¬. ìì²´ Mixin í¬í•¨ ê°€ëŠ¥. ìì²´ store ìƒì„± ê¸ˆì§€.

### 15.4 Email

ì„œë²„ ë Œë”ë§ ì „ìš©. Alpine/HTMX/JS ê¸ˆì§€. ì¸ë¼ì¸ CSS + í…Œì´ë¸” ë ˆì´ì•„ì›ƒ.

### 15.5 SaaS Partial

```html
<!-- partials/_feature_lock.html -->
<div class="c-feature-lock" x-show="!$store.user.canUse(featureCode)">
  <span>ğŸ”’</span>
  <p x-text="featureName + 'ì€(ëŠ”) ' + requiredPlan + ' í”Œëœë¶€í„° ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.'"></p>
  <a :href="SAAS.UPGRADE_URL" class="c-btn--primary">í”Œëœ ì—…ê·¸ë ˆì´ë“œ</a>
</div>

<!-- partials/_server_selector.html -->
<select @change="UserActions.switchServer($event.target.value)">
  <option value="">ì„œë²„ ì„ íƒ</option>
  <template x-for="s in $store.user.servers" :key="s.id">
    <option :value="s.id" :selected="s.id === $store.user.currentServer?.id"
            x-text="s.name + ' (' + s.host + ')'"></option>
  </template>
</select>

<!-- partials/_usage_bar.html -->
<div class="c-usage-bar">
  <span x-text="usageLabel + ': ' + usageUsed + '/' + usageLimit"></span>
  <div class="c-usage-bar__track">
    <div class="c-usage-bar__fill" :style="'width:'+usagePercent+'%'"
         :class="{'is-warning':usagePercent>80,'is-danger':usagePercent>95}"></div>
  </div>
</div>

<!-- partials/_server_favorites.html -->
<div x-show="$store.serverHistory.favoriteCount > 0">
  <h4>ì¦ê²¨ì°¾ê¸°</h4>
  <template x-for="fav in $store.serverHistory.favorites" :key="fav.serverId">
    <div @click="UserActions.switchServer(fav.serverId)"
         :style="fav.color ? 'border-left:3px solid '+fav.color : ''">
      <span x-text="fav.serverName"></span>
      <span x-text="fav.host" class="c-text--secondary"></span>
      <span x-show="fav.note" x-text="fav.note"></span>
    </div>
  </template>
</div>

<!-- partials/_server_history.html -->
<div>
  <div class="c-history__header">
    <h4>ìµœê·¼ ì ‘ì†</h4>
    <button @click="ServerHistoryActions.clearHistory($store.serverHistory)"
            x-show="$store.serverHistory.history.length > 0">ì „ì²´ ì‚­ì œ</button>
  </div>
  <template x-for="item in $store.serverHistory.recentHistory" :key="item.accessedAt">
    <div class="c-history__item" @click="UserActions.switchServer(item.serverId)">
      <span x-text="item.serverName"></span>
      <span x-text="item.dbName" class="c-text--secondary"></span>
      <span class="c-badge--sm" x-text="item.action"></span>
      <span x-text="DateUtils.relative(item.accessedAt)"></span>
      <button @click.stop="ServerHistoryActions.toggleFavorite($store.serverHistory,
        {id:item.serverId, name:item.serverName, host:item.host, dbType:item.dbType})"
        :class="{'is-active':$store.serverHistory.isFavorite(item.serverId)}">â˜…</button>
    </div>
  </template>
</div>

<!-- partials/_frequent_servers.html -->
<div x-show="$store.serverHistory.frequentServers.length > 0">
  <h4>ìì£¼ ì‚¬ìš©í•˜ëŠ” ì„œë²„</h4>
  <template x-for="s in $store.serverHistory.frequentServers" :key="s.serverId">
    <div @click="UserActions.switchServer(s.serverId)">
      <span x-text="s.serverName"></span>
      <span x-text="s.count + 'íšŒ ì ‘ì†'" class="c-text--secondary"></span>
    </div>
  </template>
</div>
```

### 15.6 ìœ„ìë“œ íŒ¨í„´ (ë§ˆì´ê·¸ë ˆì´ì…˜)

ë§ˆì´ê·¸ë ˆì´ì…˜ì€ **5ë‹¨ê³„ ìœ„ìë“œ**ë¡œ êµ¬ì„±í•œë‹¤.

| Step | í™”ë©´ | í•µì‹¬ ë™ì‘ |
|------|------|----------|
| 1 | ì„œë²„ ì„ íƒ | Source/Target ì„œë²„Â·DB ë…ë¦½ ì„ íƒ |
| 2 | í…Œì´ë¸” ì„ íƒ | ì²´í¬ë°•ìŠ¤ + ì¶©ëŒ ë°°ì§€ í‘œì‹œ |
| 3 | ì˜µì…˜ | copy/move, ifExists, includeData |
| 4 | ì‹¤í–‰ ì¤‘ | ì§„í–‰ë°”, í˜„ì¬ í…Œì´ë¸”ëª… |
| 5 | ê²°ê³¼ | ì„±ê³µ/ì‹¤íŒ¨ ëª©ë¡, ì†Œìš” ì‹œê°„ |

```html
<!-- pages/migration.html -->
<div x-data="{ store: $store.migration }" x-init="MigrationActions.onEnter(store)">
  <nav class="c-wizard-steps">
    <span :class="{'is-active': store.ui.step >= 1}">1. ì„œë²„</span>
    <span :class="{'is-active': store.ui.step >= 2}">2. í…Œì´ë¸”</span>
    <span :class="{'is-active': store.ui.step >= 3}">3. ì˜µì…˜</span>
    <span :class="{'is-active': store.ui.step >= 4}">4. ì‹¤í–‰</span>
    <span :class="{'is-active': store.ui.step >= 5}">5. ê²°ê³¼</span>
  </nav>

  <!-- Step 1: Source/Target ì„œë²„Â·DB ì„ íƒ -->
  <div x-show="store.ui.step === 1" class="c-migration-panels">
    <div class="c-migration-panel">
      <h3>Source (ì›ë³¸)</h3>
      <select @change="MigrationActions.selectSourceServer(store,
        $store.user.servers.find(s => s.id == $event.target.value))">
        <option value="">ì„œë²„ ì„ íƒ</option>
        <template x-for="s in $store.user.servers" :key="s.id">
          <option :value="s.id" x-text="s.name + ' (' + s.host + ')'"></option>
        </template>
      </select>
      <select x-show="store.source.databases.length"
              @change="MigrationActions.selectSourceDb(store, $event.target.value)">
        <option value="">DB ì„ íƒ</option>
        <template x-for="db in store.source.databases" :key="db.name">
          <option :value="db.name" x-text="db.name"></option>
        </template>
      </select>
    </div>
    <div class="c-migration-panel">
      <h3>Target (ëŒ€ìƒ)</h3>
      <!-- ë™ì¼ êµ¬ì¡° -->
    </div>
    <div x-show="store.isSameDatabase" class="c-alert--warning">
      ë™ì¼í•œ ì„œë²„ì˜ ë™ì¼í•œ DBë¡œëŠ” ë§ˆì´ê·¸ë ˆì´ì…˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    </div>
  </div>

  <!-- Step 2: í…Œì´ë¸” ì„ íƒ + ì¶©ëŒ í‘œì‹œ -->
  <div x-show="store.ui.step === 2">
    <template x-for="t in store.source.tables" :key="t.name">
      <label :class="{'is-conflict': store.target.existingTableNames.includes(t.name)}">
        <input type="checkbox" :value="t.name" x-model="store.source.selectedTables">
        <span x-text="t.name"></span>
        <span x-show="store.target.existingTableNames.includes(t.name)"
              class="c-badge--warning">ì¶©ëŒ</span>
      </label>
    </template>
    <div x-show="store.hasConflicts" class="c-alert--warning">
      <span x-text="store.conflictTables.length + 'ê°œ í…Œì´ë¸”ì´ Targetì— ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.'"></span>
    </div>
  </div>

  <!-- Step 3: ì˜µì…˜ -->
  <div x-show="store.ui.step === 3">
    <select x-model="store.options.mode">
      <option value="copy">ë³µì‚¬ (ì›ë³¸ ìœ ì§€)</option>
      <option value="move">ì´ë™ (ì›ë³¸ ì‚­ì œ)</option>
    </select>
    <select x-show="store.hasConflicts" x-model="store.options.ifExists">
      <option value="skip">ê±´ë„ˆë›°ê¸°</option>
      <option value="overwrite">ë®ì–´ì“°ê¸°</option>
      <option value="rename">ì´ë¦„ ë³€ê²½</option>
    </select>
    <label><input type="checkbox" x-model="store.options.includeData"> ë°ì´í„° í¬í•¨</label>
    <label><input type="checkbox" x-model="store.options.includeIndexes"> ì¸ë±ìŠ¤ í¬í•¨</label>
  </div>

  <!-- Step 4: ì‹¤í–‰ ì¤‘ -->
  <div x-show="store.ui.step === 4">
    <div class="c-progress">
      <div class="c-progress__bar" :style="'width:'+store.progressPercent+'%'"></div>
    </div>
    <p x-text="store.progress.current + ' / ' + store.progress.total"></p>
  </div>

  <!-- Step 5: ê²°ê³¼ -->
  <div x-show="store.ui.step === 5">
    <p x-text="store.progress.errors.length === 0
      ? store.progress.total + 'ê°œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ'
      : store.progress.errors.length + 'ê°œ ì‹¤íŒ¨'"></p>
    <p x-text="'ì†Œìš” ì‹œê°„: ' + store.elapsedTime"></p>
    <button @click="MigrationActions.reset()">ìƒˆ ë§ˆì´ê·¸ë ˆì´ì…˜</button>
  </div>

  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <div x-show="store.ui.step < 4" class="c-wizard-nav">
    <button @click="MigrationActions.prevStep(store)" :disabled="store.ui.step <= 1">ì´ì „</button>
    <button x-show="store.ui.step < 3" @click="MigrationActions.nextStep(store)">ë‹¤ìŒ</button>
    <button x-show="store.ui.step === 3" @click="MigrationActions.execute(store)"
            :disabled="store.loading" class="c-btn--primary">ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰</button>
  </div>
</div>
```

### 15.7 Modal / Alert / Confirm íŒ¨í„´

```js
// Alert
ErrorHandler.showSuccess(store, MESSAGE.SUCCESS_CREATE)
ErrorHandler.showError(store, MESSAGE.ERROR_DEFAULT)

// Confirm
store.ui.showConfirm = true
store.ui.confirmData = {
  title: 'ì‚­ì œ í™•ì¸', message: MESSAGE.CONFIRM_DELETE,
  onConfirm: () => TableInitActions.executeDelete(store),
  onCancel: () => { store.ui.showConfirm = false }
}

// Modal
store.ui.modalOpen = true
store.ui.modalData = { tableName: 'users', columns: [...] }
```

---

## 16. ì •ì  ë¦¬ì†ŒìŠ¤ ì„¤ê³„ í‘œì¤€

### 16.1 CSS êµ¬ì¡°

**ë¡œë“œ ìˆœì„œ:** themes/variables.css â†’ themes/light.css â†’ base.css â†’ layout.css â†’ components/*.css â†’ utilities.css

**ë„¤ì´ë° ê·œì¹™:**

| ì ‘ë‘ì‚¬ | ìš©ë„ | ì˜ˆì‹œ |
|--------|------|------|
| `.l-` | ë ˆì´ì•„ì›ƒ | `.l-sidebar`, `.l-content` |
| `.c-` | ì»´í¬ë„ŒíŠ¸ | `.c-modal`, `.c-wizard-steps` |
| `.u-` | ìœ í‹¸ë¦¬í‹° | `.u-hidden`, `.u-text-center` |
| `.is-` / `.has-` | ìƒíƒœ | `.is-active`, `.has-error` |

**CSS ë³€ìˆ˜:**

```css
:root {
  --color-primary: #2563eb;
  --color-success: #16a34a;
  --color-error: #dc2626;
  --color-warning: #f59e0b;
  --color-text-primary: #1f2937;
  --color-bg-primary: #ffffff;
  --color-border: #e5e7eb;
  --font-family: 'Pretendard', -apple-system, sans-serif;
  --font-size-base: 1rem;
  --spacing-sm: 8px; --spacing-md: 16px; --spacing-lg: 24px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --transition-fast: 150ms ease;
}
```

**ë‹¤í¬ ëª¨ë“œ:** `[data-theme="dark"]` ì…€ë ‰í„°ë¡œ ë³€ìˆ˜ ì˜¤ë²„ë¼ì´ë“œ.

### 16.2 ì´ë¯¸ì§€

SVG ìš°ì„ , ë˜ìŠ¤í„°ëŠ” ì••ì¶•, ê°œë³„ 500KB ì´í•˜, `logo/` `icons/` `bg/` ë¶„ë¥˜.

### 16.3 Vendor

ë¡œì»¬ ê´€ë¦¬, ì§ì ‘ ìˆ˜ì • ê¸ˆì§€ (X-17), README.mdì— ë²„ì „Â·SRI hash ê¸°ë¡, `.min.js` ì‚¬ìš©.

---

## 17. ë³´ì•ˆ ì„¤ê³„ í‘œì¤€

### 17.1 CSRF

| ë‹¨ê³„ | êµ¬í˜„ | ë°©ë²• |
|------|------|------|
| í† í° ì‚½ì… | base.html `<head>` | `<meta name="csrf-token">` |
| API ì£¼ì… | httpClient.js | `X-CSRF-Token` ìë™ |
| HTMX ì£¼ì… | htmxConfig.js | `htmx:configRequest` |
| ì„œë²„ ê²€ì¦ | FastAPI Middleware | POST/PUT/DELETE |

### 17.2 ì¸ì¦ ë§Œë£Œ

| ìƒíƒœ | ì²˜ë¦¬ |
|------|------|
| 401 | ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 403 | ê¶Œí•œ ì—†ìŒ ì•Œë¦¼ |
| 402 | í”Œëœ ì—…ê·¸ë ˆì´ë“œ ì•ˆë‚´ |

### 17.3 XSS ë°©ì§€

| ê·œì¹™ | ì„¤ëª… |
|------|------|
| ì‚¬ìš©ì ì…ë ¥ì€ `x-text` | ìë™ ì´ìŠ¤ì¼€ì´í”„ |
| `x-html`ì€ ì„œë²„ sanitize ë°ì´í„°ë§Œ | ëª…ì‹œì  ìŠ¹ì¸ |
| URL íŒŒë¼ë¯¸í„° ì§ì ‘ ì‚½ì… ê¸ˆì§€ | Actionì—ì„œ ê²€ì¦ |

### 17.4 ê¸°íƒ€

- storeì— ë¹„ë°€ë²ˆí˜¸Â·í† í° ì €ì¥ ê¸ˆì§€
- console.logì— ë¯¼ê° ì •ë³´ ê¸ˆì§€
- vendor/ ë¡œì»¬ ê´€ë¦¬ + SRI hash
- ì¸ë¼ì¸ ì´ë²¤íŠ¸ (`onclick`) ê¸ˆì§€

---

## 18. ì—ëŸ¬ ì²˜ë¦¬ ì„¤ê³„ í‘œì¤€

### 18.1 ì—ëŸ¬ íë¦„

```
Service throw â†’ Action catch â†’ ErrorHandler.handle()
  â”Œâ”€ 401 â†’ ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸
  â”œâ”€ 402 â†’ í”Œëœ ì—…ê·¸ë ˆì´ë“œ ëª¨ë‹¬
  â”œâ”€ 403 â†’ ê¶Œí•œ ì—†ìŒ ì•Œë¦¼
  â”œâ”€ 408 â†’ íƒ€ì„ì•„ì›ƒ ì•Œë¦¼
  â”œâ”€ 422 â†’ validationErrors í‘œì‹œ
  â”œâ”€ 429 â†’ ìš”ì²­ í•œë„ ì´ˆê³¼ ì•ˆë‚´
  â”œâ”€ 503 â†’ ì„œë¹„ìŠ¤ ì ê²€ ëª¨ë‹¬
  â””â”€ ê¸°íƒ€ â†’ ê³µí†µ ì—ëŸ¬ + ìš´ì˜ ë¦¬í¬íŒ…
  â†’ finally: store.loading = false
```

### 18.2 ê³„ì¸µë³„ ì±…ì„

| ê³„ì¸µ | ì±…ì„ | í•˜ì§€ ì•ŠëŠ” ê²ƒ |
|------|------|-------------|
| Service | ì—ëŸ¬ throw | catch ì•ˆ í•¨ |
| Action | try/catch, ErrorHandler ê²½ìœ  | ì§ì ‘ ì•Œë¦¼ |
| ErrorHandler | ì—ëŸ¬ ë¶„ê¸°, store.ui ê°±ì‹ , ë¦¬í¬íŒ… | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| Page | store.ui ë°”ì¸ë”©ìœ¼ë¡œ í‘œì‹œ | ì—ëŸ¬ ë¡œì§ |

### 18.3 ìœ íš¨ì„± ê²€ì¦

```js
_validateCreate(store) {
  store.ui.validationErrors = {}
  const check = CommonValidators.required(store.sourceDbName, 'DB')
  if (!check.valid) store.ui.validationErrors.sourceDbName = check.message
  const hasErr = Object.keys(store.ui.validationErrors).length > 0
  if (hasErr) ErrorHandler.showError(store, MESSAGE.ERROR_VALIDATION)
  return !hasErr
}
```

```html
<select :class="{'has-error': store.ui.validationErrors.sourceDbName}">...</select>
<p x-show="store.ui.validationErrors.sourceDbName"
   x-text="store.ui.validationErrors.sourceDbName" role="alert"></p>
```

---

## 19. ì„±ëŠ¥ ì„¤ê³„ ê¸°ì¤€

| í•­ëª© | ê¸°ì¤€ |
|------|------|
| ì´ˆê¸° í˜ì´ì§€ ë¡œë“œ | â‰¤ 3ì´ˆ |
| HTMX í˜ì´ì§€ ì „í™˜ | â‰¤ 1ì´ˆ |
| API ì‘ë‹µ (ì¼ë°˜) | â‰¤ 2ì´ˆ |
| ëª¨ë“  JS `defer` | í•„ìˆ˜ |
| `x-show` ìš°ì„  | x-ifëŠ” DOM ì¬ìƒì„± ë¹„ìš© |
| 100ê±´ ì´ˆê³¼ ëª©ë¡ | í˜ì´ì§€ë„¤ì´ì…˜ í•„ìˆ˜ |
| ê²€ìƒ‰ ì…ë ¥ | DomUtils.debounce() |
| CSS ë³€ìˆ˜ í™œìš© | ëŸ°íƒ€ì„ í…Œë§ˆ ì „í™˜ |
| ë¯¸ì‚¬ìš© CSS ì œê±° | ì‚¬ìš© ì•ˆ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ CSS ë¯¸ë¡œë“œ |

---

## 20. ì ‘ê·¼ì„± ì„¤ê³„ ê¸°ì¤€

| í•­ëª© | ê¸°ì¤€ |
|------|------|
| í‚¤ë³´ë“œ | ëª¨ë“  ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ Tab ì ‘ê·¼ |
| í¬ì»¤ìŠ¤ | ëª¨ë‹¬ ì—´ë¦¼ ì‹œ íŠ¸ë©, ë‹«í˜ ì‹œ ë³µì› |
| ARIA | ëª¨ë‹¬ `role="dialog"`, ì•Œë¦¼ `role="alert"` |
| ìƒ‰ìƒ ëŒ€ë¹„ | WCAG 2.1 AA (4.5:1) |
| ë¡œë”© | `aria-busy="true"`, `aria-live="polite"` |
| ì—ëŸ¬ | `role="alert"`, `aria-live="assertive"` |

```html
<div x-show="store.ui.modalOpen" role="dialog" aria-modal="true"
     @keydown.escape="store.ui.modalOpen = false">
  <h2 id="modal-title" x-text="store.ui.modalData.title"></h2>
</div>

<div :aria-busy="store.loading" aria-live="polite">
  <span x-show="store.loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
</div>
```

---

## 21. ì½”ë“œ ë¦¬ë·° ê¸°ì¤€

### 21.1 í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### êµ¬ì¡°

| ì½”ë“œ | í•­ëª© | ìœ„ë°˜ ì‹œ |
|------|------|--------|
| CR-01 | Pageì— `<script>` ì—†ëŠ”ê°€? | ë°˜ë ¤ |
| CR-02 | Storeê°€ base.htmlì—ì„œë§Œ ë“±ë¡? | ë°˜ë ¤ |
| CR-03 | Serviceê°€ HttpClient ê²½ìœ ? | ë°˜ë ¤ |
| CR-04 | Action catch â†’ ErrorHandler? | ë°˜ë ¤ |
| CR-05 | Action finally â†’ loading = false? | ë°˜ë ¤ |
| CR-06 | ë„¤ì´ë° ì»¨ë²¤ì…˜ ì¤€ìˆ˜? | ë°˜ë ¤ |
| CR-07 | ì˜¬ë°”ë¥¸ ë””ë ‰í„°ë¦¬ ìœ„ì¹˜? | ë°˜ë ¤ |

#### ê³µí†µ ëª¨ë“ˆ

| ì½”ë“œ | í•­ëª© | ìœ„ë°˜ ì‹œ |
|------|------|--------|
| CR-08 | ë§¤ì§ ë„˜ë²„Â·í•˜ë“œì½”ë”© URL ì—†ëŠ”ê°€? | ë°˜ë ¤ |
| CR-09 | Validators í™œìš©? | ìˆ˜ì • ìš”ì²­ |
| CR-10 | Utils í™œìš©? | ìˆ˜ì • ìš”ì²­ |
| CR-11 | Mixin/Partial í™œìš©? | ìˆ˜ì • ìš”ì²­ |
| CR-12 | CSS ì»´í¬ë„ŒíŠ¸ ìŠ¤ì½”í”„? | ìˆ˜ì • ìš”ì²­ |

#### ë³´ì•ˆ

| ì½”ë“œ | í•­ëª© | ìœ„ë°˜ ì‹œ |
|------|------|--------|
| CR-13 | x-htmlì— ì‚¬ìš©ì ì…ë ¥ ì—†ëŠ”ê°€? | ë°˜ë ¤ |
| CR-14 | storeì— ë¯¼ê° ë°ì´í„° ì—†ëŠ”ê°€? | ë°˜ë ¤ |
| CR-15 | Vendor ë¯¸ìˆ˜ì •? | ë°˜ë ¤ |

#### SaaS

| ì½”ë“œ | í•­ëª© | ìœ„ë°˜ ì‹œ |
|------|------|--------|
| CR-16 | Serviceê°€ serverIdë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ”ê°€? | ë°˜ë ¤ |
| CR-17 | ìœ ë£Œ ê¸°ëŠ¥ì— canUse ê²€ì¦ ìˆëŠ”ê°€? | ìˆ˜ì • ìš”ì²­ |
| CR-18 | DB ì‘ì—… ì‹œ ì´ë ¥ ê¸°ë¡ í˜¸ì¶œì´ ìˆëŠ”ê°€? | ìˆ˜ì • ìš”ì²­ |
| CR-19 | ì„œë²„ ì „í™˜ ì‹œ ë„ë©”ì¸ Store ì´ˆê¸°í™” í¬í•¨? | ë°˜ë ¤ |

---

## 22. ì¥ì•  ëŒ€ì‘ ì ˆì°¨

### 22.1 ReferenceError

| ìˆœì„œ | í™•ì¸ |
|------|------|
| 1 | storeì— ì •ì˜? |
| 2 | `$store.{name}` ì ‘ë‘ì‚¬ ì˜¤íƒ€? |
| 3 | Page ë‚´ `<script>`? |
| 4 | base.html ë¡œë“œ ìˆœì„œ (Phase 0~8)? |
| 5 | `defer` ëˆ„ë½? |

### 22.2 í˜ì´ì§€ ì „í™˜ ë¶ˆê°€

| ìˆœì„œ | í™•ì¸ |
|------|------|
| 1 | Network íƒ­ ìš”ì²­ ë°œìƒ? |
| 2 | `hx-get` URL ì˜¬ë°”ë¥¸ê°€? |
| 3 | `hx-target` #page-content ì¡´ì¬? |
| 4 | ì„œë²„ ì‘ë‹µ Content-Type HTML? |
| 5 | CSRF 419 ì—ëŸ¬? |

### 22.3 ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë ¨

| ìˆœì„œ | í™•ì¸ |
|------|------|
| 1 | Source/Target ì„œë²„ê°€ ëª¨ë‘ ì„ íƒëëŠ”ê°€? |
| 2 | ë™ì¼ DB ê²½ê³ ê°€ ë¬´ì‹œëëŠ”ê°€? |
| 3 | Serviceì— serverIdê°€ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ëŠ”ê°€? |
| 4 | ì¶©ëŒ í…Œì´ë¸” ifExists ì˜µì…˜ í™•ì¸ |
| 5 | API.TIMEOUT_BULK ì‹œê°„ ì´ˆê³¼? |

### 22.4 ë””ë²„ê¹… ë„êµ¬

```js
Alpine.store('user')                                    // Store í™•ì¸
JSON.parse(JSON.stringify(Alpine.store('migration')))   // ìŠ¤ëƒ…ìƒ·
Alpine.effect(() => console.log(Alpine.store('tableInit').tables.length))  // ê°ì‹œ
htmx.logAll()                                          // HTMX ë””ë²„ê·¸
```

---

## 23. ì‹ ê·œ ë„ë©”ì¸ ì¶”ê°€ ì ˆì°¨

### 23.1 íŒŒì¼ ìƒì„±

| ìˆœì„œ | íŒŒì¼ | ê²½ë¡œ |
|------|------|------|
| 1 | Store | `stores/{domain}.store.js` |
| 2 | Service | `services/{domain}.service.js` |
| 3 | Action | `actions/{domain}.actions.js` |
| 4 | Page | `pages/{domain}_{action}.html` |

### 23.2 ë“±ë¡

| ìˆœì„œ | ëŒ€ìƒ | ì‘ì—… |
|------|------|------|
| 5 | base.html | ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ (Phase ìˆœì„œ) |
| 6 | FastAPI Router | í˜ì´ì§€ + API ë¼ìš°íŠ¸ |
| 7 | Sidebar | ë©”ë‰´ í•­ëª© ì¶”ê°€ |
| 8 | UserActions._resetDomainStores | ì„œë²„ ì „í™˜ ì‹œ reset ë“±ë¡ |

### 23.3 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Store + Defaults + í‘œì¤€ ì†ì„± (loading, ui, _entered)
- [ ] Service (HttpClient + API.BASE_URL + **serverId ë§¤ê°œë³€ìˆ˜**)
- [ ] Action (try/catch/finally + ErrorHandler + Validators + MESSAGE)
- [ ] Actionì— **canUse ê¸°ëŠ¥ ê¶Œí•œ ê²€ì¦** (ìœ ë£Œ ê¸°ëŠ¥ ì‹œ)
- [ ] Actionì— **ServerHistoryActions.recordAccess()** ì—°ë™
- [ ] Page (JS ì—†ìŒ, Mixin/Partial í™œìš©)
- [ ] base.html ë“±ë¡ (Phase ìˆœì„œ)
- [ ] ì„œë²„ ë¼ìš°í„° ë“±ë¡ (HTMX/ì§ì ‘ì ‘ê·¼ ë¶„ê¸°)
- [ ] Sidebar ë©”ë‰´
- [ ] **UserActions._resetDomainStoresì— ë“±ë¡**
- [ ] CSS ì»´í¬ë„ŒíŠ¸ íŒŒì¼ (í•„ìš” ì‹œ)
- [ ] ì½”ë“œ ë¦¬ë·° í†µê³¼ (21ì¥)

---

## 24. ë¶€ë¡

### 24.1 ê³„ì¸µë³„ í—ˆìš©/ê¸ˆì§€ ìš”ì•½

| í–‰ìœ„ | Page | Mixin | Action | Service | Store | Utils | Validators | Core |
|------|------|-------|--------|---------|-------|-------|------------|------|
| store ì½ê¸° | âœ… | âœ… | âœ… | âŒ | â€” | âŒ | âŒ | âš ï¸ |
| store ì“°ê¸° | âŒ | âŒ | âœ… | âŒ | â€” | âŒ | âŒ | âš ï¸ |
| Service í˜¸ì¶œ | âŒ | âŒ | âœ… | â€” | âŒ | âŒ | âŒ | âŒ |
| HttpClient | âŒ | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ | âœ… |
| DOM | ë°”ì¸ë”© | ë°”ì¸ë”© | âŒ | âŒ | âŒ | âŒ | âŒ | ì œí•œ |
| Utils | âŒ | âœ… | âœ… | âœ… | âŒ | â€” | âœ… | âœ… |
| Constants | âŒ | âœ… | âœ… | âœ… | âŒ | âœ… | âœ… | âœ… |
| Validators | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ | â€” | âŒ |

### 24.2 ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ Phase

| Phase | ê³„ì¸µ | ì˜ì¡´ |
|-------|------|------|
| 0 | Vendor | ì—†ìŒ |
| 1 | Constants | ì—†ìŒ |
| 2 | Utils | Constants |
| 3 | Validators | Utils, Constants |
| 4 | Core | Utils, Constants |
| 5 | Mixins | Utils, Constants |
| 6 | Store | Core |
| 7 | Service | Core |
| 8 | Action | Store, Service, Validators |

### 24.3 ê¸ˆì§€ íŒ¨í„´ ì½”ë“œí‘œ

| ì½”ë“œ | ìš”ì•½ |
|------|------|
| X-01~X-06 | Page JS, ì „ì—­ë³€ìˆ˜, eval, ì¤‘ë³µ, Alpine Router |
| X-07~X-10 | Store fetch, Action DOM, Service store, Storeê°„ ì°¸ì¡° |
| X-11~X-14 | window.alert, ì§ì ‘ fetch, location, x-html |
| X-15~X-19 | ë§¤ì§ë„˜ë²„, Utilsâ†’store, Vendorìˆ˜ì •, ì¸ë¼ì¸CSS, Serviceâ†’currentServer |

### 24.4 SaaS Store ë§¤íŠ¸ë¦­ìŠ¤

| Store | ì—­í•  | ì„œë²„ ì „í™˜ ì‹œ |
|-------|------|------------|
| user | í”„ë¡œí•„, ì„œë²„ ëª©ë¡, ì„¤ì •, í”Œëœ | ìœ ì§€ |
| usage | ì‚¬ìš©ëŸ‰ ì¶”ì  | ê°±ì‹  |
| serverHistory | ì ‘ì† ì´ë ¥, ì¦ê²¨ì°¾ê¸° | ìœ ì§€ |
| common | ê³µí†µ ì•Œë¦¼, UI | ìœ ì§€ |
| migration | Source/Target ë…ë¦½ | ì´ˆê¸°í™” |
| (ë„ë©”ì¸) | ì—…ë¬´ ë°ì´í„° | ì´ˆê¸°í™” |

### 24.5 ì „ì²´ ë””ë ‰í„°ë¦¬ ìš”ì•½ë„

```
project/
â”œâ”€ templates/
â”‚   â”œâ”€ layouts/       â† base, auth, print
â”‚   â”œâ”€ pages/         â† View ì „ìš© (JS ê¸ˆì§€)
â”‚   â”œâ”€ components/    â† sidebar, modals, alert, upgrade_modal
â”‚   â”œâ”€ partials/      â† _pagination, _search_bar, _server_*, _feature_lock, _usage_bar
â”‚   â”œâ”€ widgets/       â† w_calendar, w_file_upload
â”‚   â””â”€ emails/        â† ì„œë²„ ì „ìš©
â”‚
â”œâ”€ static/
â”‚   â”œâ”€ js/
â”‚   â”‚   â”œâ”€ core/          â† errorHandler(SaaSì—ëŸ¬), httpClient, htmxConfig
â”‚   â”‚   â”œâ”€ constants/     â† api, ui, message, saas, features
â”‚   â”‚   â”œâ”€ utils/         â† date(durationí¬í•¨), format, string, dom
â”‚   â”‚   â”œâ”€ validators/    â† common, business
â”‚   â”‚   â”œâ”€ mixins/        â† pagination, search, sortable, selectable
â”‚   â”‚   â”œâ”€ stores/        â† user, usage, serverHistory, common, migration, ë„ë©”ì¸...
â”‚   â”‚   â”œâ”€ services/      â† serverId ë§¤ê°œë³€ìˆ˜ ê¸°ë°˜
â”‚   â”‚   â””â”€ actions/       â† ê¸°ëŠ¥ê¶Œí•œ + ì´ë ¥ìë™ê¸°ë¡
â”‚   â”‚
â”‚   â”œâ”€ css/
â”‚   â”‚   â”œâ”€ themes/        â† variables, light, dark
â”‚   â”‚   â”œâ”€ components/    â† modal, table, wizard, progress, favorites, history...
â”‚   â”‚   â”œâ”€ base.css, layout.css, utilities.css
â”‚   â”‚
â”‚   â”œâ”€ images/{logo, icons, bg}
â”‚   â””â”€ vendor/{alpine, htmx, README.md}
```

---

> **"í˜ì´ì§€ì— JSë¥¼ ì“°ëŠ” ìˆœê°„, ìš´ì˜ ë¦¬ìŠ¤í¬ê°€ ì‹œì‘ëœë‹¤."**
> **"ì§ì ‘ fetchë¥¼ ì“°ëŠ” ìˆœê°„, ë³´ì•ˆ ë¦¬ìŠ¤í¬ê°€ ì‹œì‘ëœë‹¤."**
> **"currentServerì— ì˜ì¡´í•˜ëŠ” ìˆœê°„, ë©€í‹° ì„œë²„ê°€ ë¶ˆê°€ëŠ¥í•´ì§„ë‹¤."**
> **"í•˜ë“œì½”ë”©í•˜ëŠ” ìˆœê°„, ìœ ì§€ë³´ìˆ˜ ë¹„ìš©ì´ ì‹œì‘ëœë‹¤."**
> **"í‘œì¤€ì„ ì§€í‚¤ëŠ” ê²ƒì´ ê°€ì¥ ë¹ ë¥¸ ê¸¸ì´ë‹¤."**