# ğŸ“‹ ë¦¬íŒ©í† ë§ ì‹¤í–‰ ìˆœì„œì„œ

## corp-db-manager í”„ë¡ íŠ¸ì—”ë“œ í‘œì¤€í™”

---

## ì‹¤í–‰ ì›ì¹™

```
1. í•œ ë²ˆì— í•˜ë‚˜ì”© â€” ì‘ì—… ë‹¨ìœ„ë¥¼ ì‘ê²Œ ìœ ì§€
2. ë§¤ ë‹¨ê³„ ë™ì‘ í™•ì¸ â€” ê¸°ì¡´ ê¸°ëŠ¥ ì ˆëŒ€ ê¹¨ì§€ì§€ ì•ŠìŒ
3. ë³‘í–‰ ëª¨ë“œ â€” ìƒˆ í‘œì¤€ + ê¸°ì¡´ eval íŒŒì´í”„ë¼ì¸ ê³µì¡´
4. ëŒ€í‘œ ë„ë©”ì¸ ë¨¼ì € â€” tableInitì„ ì™„ë²½íˆ ì „í™˜ í›„ ë‚˜ë¨¸ì§€ ë³µì‚¬
```

---

## ì „ì²´ ë¡œë“œë§µ (27ë‹¨ê³„)

```
[ì‚¬ì „ ì •ë¦¬]
 Step 01. copy íŒŒì¼ ì •ë¦¬ + Git ë¸Œëœì¹˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„

[ì¸í”„ë¼ êµ¬ì¶• â€” ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ]
 Step 02. ë””ë ‰í„°ë¦¬ ìƒì„± â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 10ë¶„
 Step 03. constants/api.constants.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„
 Step 04. constants/ui.constants.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 15ë¶„
 Step 05. constants/message.constants.js â”€â”€â”€â”€â”€â”€â”€â”€ 20ë¶„
 Step 06. Vendor ë¡œì»¬í™” (Alpine, HTMX) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 20ë¶„
 Step 07. core/httpClient.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„
 Step 08. core/errorHandler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„
 Step 09. core/htmxConfig.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 20ë¶„
 Step 10. base.htmlì— ìŠ¤í¬ë¦½íŠ¸ ë“±ë¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 15ë¶„
 Step 11. utils (date, format, string, dom) â”€â”€â”€â”€ 30ë¶„
 Step 12. validators (common, business) â”€â”€â”€â”€â”€â”€â”€â”€ 20ë¶„

[ëŒ€í‘œ ë„ë©”ì¸ ì „í™˜ â€” tableInit]
 Step 13. stores/tableInit.store.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„
 Step 14. services/tableInit.service.js â”€â”€â”€â”€â”€â”€â”€â”€ 20ë¶„
 Step 15. actions/tableInit.actions.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 45ë¶„
 Step 16. table_init.html ì „í™˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„
 Step 17. ë™ì‘ í…ŒìŠ¤íŠ¸ + ê²€ì¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„

[ê³µí†µ Store]
 Step 18. stores/user.store.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 20ë¶„
 Step 19. stores/common.store.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 15ë¶„

[ë‚˜ë¨¸ì§€ ë„ë©”ì¸ ì „í™˜ â€” ìš°ì„ ìˆœìœ„ìˆœ]
 Step 20. settings ë„ë©”ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 60ë¶„
 Step 21. servers ë„ë©”ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 60ë¶„
 Step 22. corps ë„ë©”ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 60ë¶„
 Step 23. dbCreate ë„ë©”ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 60ë¶„
 Step 24. ë‚˜ë¨¸ì§€ ë„ë©”ì¸ (dashboard, copy_data,
          dbSync, monitoring, schemaExport,
          notifications, activityLogs) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê° 30~45ë¶„

[ë§ˆë¬´ë¦¬]
 Step 25. Mixins + FE Partials â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 45ë¶„
 Step 26. eval íŒŒì´í”„ë¼ì¸ ì œê±° + base.html ì •ë¦¬ â”€â”€ 30ë¶„
 Step 27. ìµœì¢… ê²€ì¦ + ë¬¸ì„œí™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30ë¶„
```

---

## Step 01. copy íŒŒì¼ ì •ë¦¬ + Git ë¸Œëœì¹˜

### ì‘ì—… ë‚´ìš©

```powershell
# 1. í˜„ì¬ ìƒíƒœ ì»¤ë°‹
git add -A
git commit -m "refactor ì‹œì‘ ì „ í˜„ì¬ ìƒíƒœ ë°±ì—…"

# 2. ë¦¬íŒ©í† ë§ ë¸Œëœì¹˜ ìƒì„±
git checkout -b refactor/fe-standard-v4.0

# 3. copy íŒŒì¼ ì‚­ì œ (28ê°œ)
# PowerShellì—ì„œ ì‹¤í–‰
Get-ChildItem -Recurse -File -Filter "* copy*" | Remove-Item
Remove-Item "app/templates/base_20260211.html"

# 4. ì‚­ì œ ì»¤ë°‹
git add -A
git commit -m "Step 01: copy íŒŒì¼ ì •ë¦¬"
```

### ì‚­ì œ ëŒ€ìƒ (28ê°œ)

```
routers: auth copy.py, pages copy.py, servers copy.py, settings copy.py, table_init copy.py
services: server_service copy.py
drivers: mssql copy.py, mysql copy.py, oracle copy.py, postgresql copy.py
components: modals copy.html, sidebar_menu copy.html
pages: copy_data copy.html, corps copy.html, dashboard copy.html,
       dashboard_overview copy.html, db_create copy.html, login copy.html,
       servers copy.html, settings copy.html, table_init copy.html
partials: result copy.html, tables copy.html, list copy.html,
          activities copy.html, capacity_chart copy.html,
          step1_corp_select copy.html, step2_sql_preview copy.html
ê¸°íƒ€: base_20260211.html
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] copy íŒŒì¼ 28ê°œ ì‚­ì œ
- [ ] Git ë¸Œëœì¹˜ `refactor/fe-standard-v4.0` ìƒì„±
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ë™ì‘

---

## Step 02. ë””ë ‰í„°ë¦¬ ìƒì„±

### ì‘ì—… ë‚´ìš©

```powershell
$dirs = @(
    "app/static/js/core",
    "app/static/js/constants",
    "app/static/js/utils",
    "app/static/js/validators",
    "app/static/js/mixins",
    "app/static/js/stores",
    "app/static/js/services",
    "app/static/js/actions",
    "app/static/css/themes",
    "app/static/css/components",
    "app/static/vendor/alpine",
    "app/static/vendor/htmx",
    "app/templates/layouts"
)
foreach ($d in $dirs) {
    New-Item -ItemType Directory -Force -Path $d
}
```

```bash
git add -A && git commit -m "Step 02: ëª©í‘œ ë””ë ‰í„°ë¦¬ ìƒì„±"
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] 13ê°œ ë””ë ‰í„°ë¦¬ ìƒì„±
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì˜í–¥ ì—†ìŒ

---

## Step 03. constants/api.constants.js

### ì‘ì—… ë‚´ìš©

í˜„ì¬ ì½”ë“œì—ì„œ í•˜ë“œì½”ë”©ëœ URLì„ ìˆ˜ì§‘í•˜ì—¬ ìƒìˆ˜í™”.

### ìƒì„± íŒŒì¼: `app/static/js/constants/api.constants.js`

```
ìˆ˜ì§‘ ëŒ€ìƒ (table_init.html + settings.htmlì—ì„œ):
/api/servers/{id}/databases
/api/table-init/corp-info-by-db
/api/table-init/tables/{serverId}/{dbName}
/api/table-init/columns/{serverId}/{dbName}/{tableName}
/api/table-init/execute
/api/settings/all
/api/settings/alert
/api/settings/main-db/entries
/api/settings/main-db/entries/{id}
/api/settings/main-db/test
/api/settings/main-db/columns
/api/settings/replication
/api/settings/replication/test-db-account
/auth/login
/auth/logout
/notifications/badge
/notifications
... (ë‚˜ë¨¸ì§€ Page í™•ì¸ í›„ ì¶”ê°€)
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] api.constants.js ìƒì„±
- [ ] í˜„ì¬ Pageì˜ ëª¨ë“  URLì´ í¬í•¨ë¨

---

## Step 04. constants/ui.constants.js

### ìƒì„± íŒŒì¼: `app/static/js/constants/ui.constants.js`

```
ìˆ˜ì§‘ ëŒ€ìƒ:
PAGE_SIZE = 20
DEBOUNCE_MS = 300
TOAST_DURATION = 3000          â† setTimeout(fn, 3000) ì—ì„œ
NOTIFICATION_POLL_SEC = 30     â† hx-trigger="every 30s" ì—ì„œ
KEY.ENTER / ESCAPE / TAB
```

---

## Step 05. constants/message.constants.js

### ìƒì„± íŒŒì¼: `app/static/js/constants/message.constants.js`

```
ìˆ˜ì§‘ ëŒ€ìƒ (ë‘ Pageì—ì„œ):
- 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤'
- 'ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'
- 'ë©”ì¸ DBê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.'
- 'ë©”ì¸ DBê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.'
- 'ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'
- 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'
- 'ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'
- 'ì•Œë¦¼ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.'
- 'ë³µì œ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.'
- 'ì»¬ëŸ¼ ë§¤í•‘ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.'
- 'ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ'
- 'ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨'
- 'íƒ€ê²Ÿ DBë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.'
- 'ì†ŒìŠ¤ì™€ íƒ€ê²Ÿì´ ë™ì¼í•œ ì„œë²„/DBì…ë‹ˆë‹¤.'
... (ë‚˜ë¨¸ì§€ Page í™•ì¸ í›„ ì¶”ê°€)
```

---

## Step 06. Vendor ë¡œì»¬í™”

### ì‘ì—… ë‚´ìš©

```powershell
# Alpine.js ë‹¤ìš´ë¡œë“œ
Invoke-WebRequest -Uri "https://unpkg.com/alpinejs@3.14.3/dist/cdn.min.js" -OutFile "app/static/vendor/alpine/alpine.3.14.3.min.js"

# HTMX ë‹¤ìš´ë¡œë“œ
Invoke-WebRequest -Uri "https://unpkg.com/htmx.org@1.9.10/dist/htmx.min.js" -OutFile "app/static/vendor/htmx/htmx.1.9.10.min.js"
```

vendor/README.md ìƒì„± (ë²„ì „, ì¶œì²˜, ë‚ ì§œ ê¸°ë¡).
base.htmlì˜ CDN â†’ ë¡œì»¬ ê²½ë¡œ ë³€ê²½ì€ Step 10ì—ì„œ ì¼ê´„ ì²˜ë¦¬.

---

## Step 07. core/httpClient.js

### ìƒì„± íŒŒì¼: `app/static/js/core/httpClient.js`

í•µì‹¬ ê¸°ëŠ¥:
- CSRF í† í° ìë™ ì£¼ì… (`<meta name="csrf-token">`)
- Content-Type ìë™ ì„¤ì •
- íƒ€ì„ì•„ì›ƒ (AbortController)
- ì—ëŸ¬ ì •ê·œí™” (status, message, details)
- get / post / put / delete ë©”ì„œë“œ

**í˜„ì¬ ì½”ë“œì˜ fetch íŒ¨í„´ í†µí•©:**
```js
// Before (ê° Pageì—ì„œ ë°˜ë³µ)
const response = await fetch('/api/settings/alert', {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(this.alert)
});

// After
const data = await HttpClient.put(`${API.SETTINGS}/alert`, this.alert)
```

---

## Step 08. core/errorHandler.js

### ìƒì„± íŒŒì¼: `app/static/js/core/errorHandler.js`

í•µì‹¬ ê¸°ëŠ¥:
- ì—ëŸ¬ ìƒíƒœ ì½”ë“œ ë¶„ê¸° (401, 402, 403, 408, 422, 429, 503)
- store.ui.alertData ê°±ì‹  â†’ Alpine ë°”ì¸ë”©ìœ¼ë¡œ í‘œì‹œ
- showError / showSuccess / showWarning
- ìš´ì˜ ì—ëŸ¬ ë¦¬í¬íŒ… (fire-and-forget)

**í˜„ì¬ ì½”ë“œì˜ ì—ëŸ¬ íŒ¨í„´ í†µí•©:**
```js
// Before (settings.html)
this.showToast('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');

// Before (table_init.html)
this.alertData = { title: 'ì˜¤ë¥˜', message: error.message, type: 'error' };
this.showAlertModal = true;

// After (í†µí•©)
ErrorHandler.showError(store, MESSAGE.ERROR_SAVE)
```

---

## Step 09. core/htmxConfig.js

### ìƒì„± íŒŒì¼: `app/static/js/core/htmxConfig.js`

í•µì‹¬ ê¸°ëŠ¥:
- htmx:configRequest â†’ CSRF í† í° ì£¼ì…
- htmx:responseError â†’ 401 ë¦¬ë‹¤ì´ë ‰íŠ¸, ê¸°íƒ€ ì—ëŸ¬ ì•Œë¦¼
- htmx:afterSwap â†’ ìŠ¤í¬ë¡¤ ì´ˆê¸°í™”, ì‚¬ì´ë“œë°” active ê°±ì‹ 

**base.htmlì˜ ê¸°ì¡´ ì½”ë“œë¥¼ ì™¸ë¶€ íŒŒì¼ë¡œ ì¶”ì¶œ (eval íŒŒì´í”„ë¼ì¸ì€ ì•„ì§ ìœ ì§€)**

---

## Step 10. base.htmlì— ìŠ¤í¬ë¦½íŠ¸ ë“±ë¡

### ì‘ì—… ë‚´ìš©

base.htmlì„ ìˆ˜ì •í•˜ì—¬:
1. CSRF ë©”íƒ€ íƒœê·¸ ì¶”ê°€
2. CDN â†’ Vendor ë¡œì»¬ ê²½ë¡œ ë³€ê²½
3. ìƒˆ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë¡œë“œ ì¶”ê°€
4. **ê¸°ì¡´ eval íŒŒì´í”„ë¼ì¸ì€ ê·¸ëŒ€ë¡œ ìœ ì§€** (í˜¸í™˜ ëª¨ë“œ)

```html
<head>
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <!-- Tailwind CSS CDN (ìœ ì§€) -->
    <script src="https://cdn.tailwindcss.com"></script>
    ...
</head>

...

<!-- Vendor (CDN â†’ ë¡œì»¬) -->
<script src="/static/vendor/htmx/htmx.1.9.10.min.js"></script>
<script defer src="/static/vendor/alpine/alpine.3.14.3.min.js"></script>

<!-- Constants -->
<script defer src="/static/js/constants/api.constants.js"></script>
<script defer src="/static/js/constants/ui.constants.js"></script>
<script defer src="/static/js/constants/message.constants.js"></script>

<!-- Utils -->
<script defer src="/static/js/utils/date.utils.js"></script>
<script defer src="/static/js/utils/format.utils.js"></script>
<script defer src="/static/js/utils/string.utils.js"></script>
<script defer src="/static/js/utils/dom.utils.js"></script>

<!-- Validators -->
<script defer src="/static/js/validators/common.validators.js"></script>

<!-- Core -->
<script defer src="/static/js/core/errorHandler.js"></script>
<script defer src="/static/js/core/httpClient.js"></script>
<script defer src="/static/js/core/htmxConfig.js"></script>

<!-- Stores (Phase 3ì—ì„œ ì¶”ê°€) -->
<!-- Services (Phase 4ì—ì„œ ì¶”ê°€) -->
<!-- Actions (Phase 5ì—ì„œ ì¶”ê°€) -->

<!-- â˜… ê¸°ì¡´ eval íŒŒì´í”„ë¼ì¸ (ë‹¹ë¶„ê°„ ìœ ì§€) -->
<script>
    var _pendingScripts = [];
    // ... ê¸°ì¡´ ì½”ë“œ ê·¸ëŒ€ë¡œ
</script>
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] ìƒˆ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì—ëŸ¬ ì—†ìŒ (ì½˜ì†”)
- [ ] ê¸°ì¡´ ëª¨ë“  Page ì •ìƒ ë™ì‘
- [ ] `HttpClient`, `ErrorHandler`, `API`, `MESSAGE` ì „ì—­ ì ‘ê·¼ ê°€ëŠ¥

---

## Step 11. utils (4ê°œ íŒŒì¼)

| íŒŒì¼ | í•µì‹¬ í•¨ìˆ˜ | ë¹„ê³  |
|------|----------|------|
| date.utils.js | format, relative, formatDuration | table_init ì†Œìš”ì‹œê°„ í‘œì‹œ |
| format.utils.js | number, currency, fileSize | toLocaleString() ëŒ€ì²´ |
| string.utils.js | truncate, isEmpty | ê²€ìƒ‰, ìœ íš¨ì„± |
| dom.utils.js | debounce, scrollToTop | ê²€ìƒ‰ ì…ë ¥ |

---

## Step 12. validators (2ê°œ íŒŒì¼)

| íŒŒì¼ | í•µì‹¬ í•¨ìˆ˜ | ë¹„ê³  |
|------|----------|------|
| common.validators.js | required, maxLength, isEmail | í¼ ê²€ì¦ |
| business.validators.js | validateBizNumber | ì‚¬ì—…ìë²ˆí˜¸ ê²€ì¦ |

```bash
git add -A && git commit -m "Step 12: Utils + Validators ì™„ë£Œ"
```

**ì—¬ê¸°ê¹Œì§€ê°€ ì¸í”„ë¼. ê¸°ì¡´ ì½”ë“œ ë³€ê²½ = base.html ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì¶”ê°€ë§Œ.**

---

## Step 13~17. ëŒ€í‘œ ë„ë©”ì¸ ì „í™˜ (tableInit) â­

**ì´ 5ë‹¨ê³„ê°€ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. tableInitì„ ì™„ë²½íˆ ì „í™˜í•˜ë©´ ë‚˜ë¨¸ì§€ 14ê°œ ë„ë©”ì¸ì€ ë™ì¼ íŒ¨í„´ìœ¼ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤.**

### Step 13. stores/tableInit.store.js

table_init.htmlì˜ `tableInitApp()` ë°ì´í„° ì†ì„±ì„ Storeë¡œ ì¶”ì¶œ.

```
ì¶”ì¶œ ëŒ€ìƒ:
- sourceServerId, sourceDbName, sourceDatabases, sourceCorpCode, sourceCorpName
- targetServerId, targetDbName, targetDatabases, targetCorpCode, targetCorpName
- optTruncate, optReplaceCorp, optKeepIdentity
- tables, tableSearch, loading, selectedCorpColumns, tableStatus, tableStatusText
- selectedTables, batchRunning, batchCurrent, batchTotal, batchCurrentTable
- filterHasData, loadedColumns
- UI ìƒíƒœ (ëª¨ë‹¬ë“¤)
- computed: filteredTables
```

### Step 14. services/tableInit.service.js

table_init.htmlì˜ fetch() í˜¸ì¶œì„ Serviceë¡œ ì¶”ì¶œ.

```
ì¶”ì¶œ ëŒ€ìƒ (7ê°œ API):
- fetchDatabases(serverId) â†’ GET /api/servers/{id}/databases
- fetchCorpInfo(dbName) â†’ GET /api/table-init/corp-info-by-db
- fetchTables(serverId, dbName) â†’ GET /api/table-init/tables/{id}/{db}
- fetchColumns(serverId, dbName, table) â†’ GET /api/table-init/columns/{id}/{db}/{table}
- execute(requestData) â†’ POST /api/table-init/execute
```

### Step 15. actions/tableInit.actions.js

table_init.htmlì˜ ë©”ì„œë“œë¥¼ Actionìœ¼ë¡œ ì¶”ì¶œ.

```
ì¶”ì¶œ ëŒ€ìƒ:
- onEnter (init ëŒ€ì²´)
- loadSourceDatabases, onSourceDbChange
- loadTargetDatabases, onTargetDbChange
- loadTables, loadTableColumns
- showActionModal, onTableActionConfirm, executeAction
- toggleSelectAll, batchInsert, batchDelete, onConfirm
- _executeSingle, _validateAction
```

### Step 16. table_init.html ì „í™˜

```html
<!-- Before -->
<div x-data="tableInitApp()" x-init="init()">
    ...
</div>
<script>
function tableInitApp() { return { ... 350ì¤„ ... } }
</script>

<!-- After -->
<div x-data="{ store: $store.tableInit }"
     x-init="TableInitActions.onEnter(store)">
    <!-- x-model="sourceServerId" â†’ x-model="store.sourceServerId" -->
    <!-- @change="loadSourceDatabases()" â†’ @change="TableInitActions.loadSourceDatabases(store)" -->
    ...
</div>
<!-- <script> ì—†ìŒ -->
```

### Step 17. ë™ì‘ í…ŒìŠ¤íŠ¸

```
í…ŒìŠ¤íŠ¸ í•­ëª©:
â–¡ ì†ŒìŠ¤ ì„œë²„/DB ì„ íƒ â†’ í…Œì´ë¸” ëª©ë¡ ë¡œë“œ
â–¡ íƒ€ê²Ÿ ì„œë²„/DB ì„ íƒ â†’ ë²•ì¸ ì •ë³´ í‘œì‹œ
â–¡ ë™ì¼ DB ì„ íƒ â†’ ê²½ê³ 
â–¡ ê°œë³„ INSERT/DELETE â†’ ê²°ê³¼ ëª¨ë‹¬
â–¡ ì¼ê´„ INSERT â†’ ì§„í–‰ë°” + ê²°ê³¼
â–¡ ì¼ê´„ DELETE â†’ í™•ì¸ ëª¨ë‹¬ â†’ ì§„í–‰ë°” + ê²°ê³¼
â–¡ í…Œì´ë¸” ê²€ìƒ‰ + í•„í„°
â–¡ ë²•ì¸ì½”ë“œ ì»¬ëŸ¼ ë“œë¡­ë‹¤ìš´
â–¡ í˜ì´ì§€ ì¬ì§„ì… (ë’¤ë¡œê°€ê¸°)
â–¡ ì½˜ì†” ì—ëŸ¬ ì—†ìŒ
```

```bash
git add -A && git commit -m "Step 17: tableInit ë„ë©”ì¸ í‘œì¤€ ì „í™˜ ì™„ë£Œ"
```

---

## Step 18~19. ê³µí†µ Store

### Step 18. stores/user.store.js

ì‚¬ìš©ì í”„ë¡œí•„, ì„œë²„ ëª©ë¡, í”Œëœ ì •ë³´.
base.htmlì—ì„œ `{{ user.name }}`, `{{ user.role }}` ë“±ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬.

### Step 19. stores/common.store.js

ê³µí†µ ì•Œë¦¼ (toast/alert) ìƒíƒœ.
base.htmlì˜ toast-containerë¥¼ Alpine ë°”ì¸ë”©ìœ¼ë¡œ ì „í™˜.

---

## Step 20~24. ë‚˜ë¨¸ì§€ ë„ë©”ì¸ ì „í™˜

### ì „í™˜ ìˆœì„œ (ë³µì¡ë„ + ì¤‘ìš”ë„ ê¸°ì¤€)

| Step | ë„ë©”ì¸ | ì¶”ì • JS ê·œëª¨ | ì´ìœ  |
|------|--------|------------|------|
| 20 | **settings** | 250ì¤„ | ì´ë¯¸ ì½”ë“œ í™•ì¸í•¨, íƒ­+í¼+CRUD |
| 21 | **servers** | 200~300ì¤„ | ì„œë²„ ê´€ë¦¬ í•µì‹¬, CRUD |
| 22 | **corps** | 200~250ì¤„ | ë²•ì¸ ê´€ë¦¬, CRUD + ê²€ì¦ |
| 23 | **dbCreate** | 250~300ì¤„ | ìœ„ìë“œ íŒ¨í„´, 3ë‹¨ê³„ |
| 24-a | **copy_data** | 200~300ì¤„ | ë©€í‹°ì„œë²„ ì°¸ì¡° |
| 24-b | **dbSync** | 200~250ì¤„ | ë™ê¸°í™” + ì§„í–‰ë¥  |
| 24-c | **dashboard** | 100~150ì¤„ | í†µê³„ + ì°¨íŠ¸ |
| 24-d | **monitoring** | 150~200ì¤„ | ì„œë²„/DB ìƒíƒœ ì²´í¬ |
| 24-e | **schemaExport** | 100~150ì¤„ | ìŠ¤í‚¤ë§ˆ ë‚´ë³´ë‚´ê¸° |
| 24-f | **notifications** | 50~100ì¤„ | ì•Œë¦¼ ëª©ë¡ |
| 24-g | **activityLogs** | 50~100ì¤„ | í™œë™ ë¡œê·¸ |

### ë„ë©”ì¸ ì „í™˜ ë‹¨ìœ„ ì‘ì—… (ë§¤ ë„ë©”ì¸ ë™ì¼)

```
1. Page HTML í™•ì¸ â†’ ì¸ë¼ì¸ JS ê·œëª¨ íŒŒì•…
2. stores/{domain}.store.js ìƒì„± (ë°ì´í„° ì†ì„± ì¶”ì¶œ)
3. services/{domain}.service.js ìƒì„± (fetch ì¶”ì¶œ)
4. actions/{domain}.actions.js ìƒì„± (ë©”ì„œë“œ ì¶”ì¶œ)
5. base.htmlì— script defer ì¶”ê°€
6. Page HTML ì „í™˜ (x-data â†’ $store, @event â†’ Action í˜¸ì¶œ)
7. <script> ì‚­ì œ
8. ë™ì‘ í…ŒìŠ¤íŠ¸
9. git commit
```

---

## Step 25. Mixins + FE Partials

### Mixins (ê³µí†µ íŒ¨í„´ ì¶”ì¶œ)

ì—¬ëŸ¬ ë„ë©”ì¸ì—ì„œ ë°˜ë³µë˜ëŠ” íŒ¨í„´ì„ Mixinìœ¼ë¡œ:

| Mixin | ì ìš© ë„ë©”ì¸ |
|-------|-----------|
| SelectableMixin | tableInit, copyData |
| SearchMixin | tableInit, corps, tables |
| PaginationMixin | corps, tables, activityLogs |

### FE Partials

| Partial | ìš©ë„ |
|---------|------|
| _server_selector.html | ì„œë²„ ì„ íƒ ë“œë¡­ë‹¤ìš´ (servers, tableInit, copyData) |
| _empty_state.html | ê°œì„ ëœ ë¹ˆ ìƒíƒœ (í†µí•©) |

---

## Step 26. eval íŒŒì´í”„ë¼ì¸ ì œê±°

**ëª¨ë“  Pageì˜ ì¸ë¼ì¸ `<script>`ê°€ ì œê±°ëœ í›„ì—ë§Œ ì‹¤í–‰.**

```
base.htmlì—ì„œ ì‚­ì œ:
- var _pendingScripts = []
- htmx:beforeSwap í•¸ë“¤ëŸ¬ (script ì¶”ì¶œ)
- htmx:afterSettle í•¸ë“¤ëŸ¬ (eval + Alpine.initTree)
- showToast() ì „ì—­ í•¨ìˆ˜
- {% block scripts %} (ì´ë¯¸ ì‚¬ìš©í•˜ëŠ” Page ì—†ìŒ)

base.htmlì— ìœ ì§€:
- htmxConfig.jsê°€ ì²˜ë¦¬í•˜ëŠ” ìµœì†Œí•œì˜ HTMX ì„¤ì •
- Alpine í† ìŠ¤íŠ¸ ë°”ì¸ë”© (common.store ê¸°ë°˜)
```

---

## Step 27. ìµœì¢… ê²€ì¦ + ë¬¸ì„œí™”

```
ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸:
â–¡ grep -rn "<script" app/templates/pages/ â†’ 0ê±´
â–¡ grep -rn "fetch(" app/static/js/ | grep -v httpClient | grep -v errorHandler â†’ 0ê±´
â–¡ grep -rn "'/api/" app/static/js/ | grep -v constants/ â†’ 0ê±´
â–¡ grep -rn "window.alert\|window.confirm" app/static/js/ â†’ 0ê±´
â–¡ ì „ì²´ í˜ì´ì§€ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ (18ê°œ)

ë¬¸ì„œí™”:
â–¡ docs/after-structure.txt ìƒì„±
â–¡ docs/ì„¤ê³„í‘œì¤€ì •ì˜ì„œ_v4.0.md ìµœì‹ í™”
â–¡ main ë¸Œëœì¹˜ ë¨¸ì§€
```

---

## ì¼ì • ìš”ì•½

| êµ¬ê°„ | Steps | ì˜ˆìƒ ì†Œìš” | ë‚´ìš© |
|------|-------|----------|------|
| ì‚¬ì „ ì •ë¦¬ | 01~02 | 40ë¶„ | copy ì‚­ì œ, ë””ë ‰í„°ë¦¬ |
| ì¸í”„ë¼ | 03~12 | 3.5~4ì‹œê°„ | Constants, Core, Utils, Validators |
| ëŒ€í‘œ ë„ë©”ì¸ | 13~17 | 2.5~3ì‹œê°„ | tableInit ì™„ë²½ ì „í™˜ |
| ê³µí†µ Store | 18~19 | 35ë¶„ | user, common |
| ë‚˜ë¨¸ì§€ ë„ë©”ì¸ | 20~24 | 6~9ì‹œê°„ | 14ê°œ ë„ë©”ì¸ (íŒ¨í„´ ë³µì‚¬) |
| ë§ˆë¬´ë¦¬ | 25~27 | 1.5~2ì‹œê°„ | Mixins, eval ì œê±°, ê²€ì¦ |
| **í•©ê³„** | 27 | **15~20ì‹œê°„** | í’€íƒ€ì„ 2~3ì¼ |

---

## ë‹¤ìŒ ë‹¨ê³„

**Step 01ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.**

> ê° Stepì—ì„œ ì €ì—ê²Œ "Step XX ì‹œì‘" ì´ë¼ê³  ë§ì”€í•´ ì£¼ì‹œë©´,
> í•´ë‹¹ Stepì˜ ì½”ë“œë¥¼ ìƒì„±í•´ ë“œë¦½ë‹ˆë‹¤.
>
> í•„ìš”í•œ ê²½ìš° ì¶”ê°€ íŒŒì¼ ë‚´ìš©ì„ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.