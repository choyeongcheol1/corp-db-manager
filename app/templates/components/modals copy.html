{# 
    공통 모달 컴포넌트
    
    사용법:
    {% from "components/modals.html" import confirm_delete_modal, alert_modal, confirm_modal, table_action_modal %}
    
    {{ confirm_delete_modal() }}
#}

{# ============================================================
   삭제 확인 모달
   
   필요한 Alpine.js 변수:
   - showDeleteModal: boolean
   - deleteTarget: { id, name, type }
   - confirmDelete(): function
   
   사용 예시:
   deleteServer(id, name) {
       this.deleteTarget = { id: id, name: name, type: '서버 연결 정보' };
       this.showDeleteModal = true;
   }
   ============================================================ #}
{% macro confirm_delete_modal() %}
<div x-show="showDeleteModal" 
     x-cloak 
     x-transition:enter="transition ease-out duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl">
        <!-- 헤더 -->
        <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-800" x-text="(deleteTarget.type || '항목') + ' 삭제'"></h3>
        </div>
        
        <!-- 메시지 -->
        <p class="text-gray-600 mb-4">
            <span class="font-semibold text-gray-800" x-text="deleteTarget.name"></span>
            <span x-text="deleteTarget.type ? ' ' + deleteTarget.type + '을(를)' : '을(를)'"></span> 삭제하시겠습니까?
        </p>
        
        <!-- 경고 메시지 -->
        <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mb-6">
            <p class="text-sm text-amber-800" x-text="deleteTarget.warning || '이 시스템에서 해당 정보가 제거됩니다.'"></p>
        </div>
        
        <!-- 버튼 -->
        <div class="flex justify-end gap-2">
            <button type="button" 
                    @click="showDeleteModal = false"
                    class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">
                취소
            </button>
            <button type="button" 
                    @click="confirmDelete()"
                    class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
                삭제
            </button>
        </div>
    </div>
</div>
{% endmacro %}


{# ============================================================
   확인 모달 (일반)
   
   필요한 Alpine.js 변수:
   - showConfirmModal: boolean
   - confirmData: { title, message, confirmText, cancelText, type }
   - onConfirm(): function
   
   type: 'info' | 'warning' | 'danger' | 'success'
   ============================================================ #}
{% macro confirm_modal() %}
<div x-show="showConfirmModal" 
     x-cloak
     x-transition:enter="transition ease-out duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl">
        <!-- 헤더 -->
        <div class="flex items-center gap-3 mb-4">
            <!-- 아이콘 (타입별) -->
            <template x-if="confirmData.type === 'danger'">
                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                </div>
            </template>
            <template x-if="confirmData.type === 'warning'">
                <div class="w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                </div>
            </template>
            <template x-if="confirmData.type === 'success'">
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
            </template>
            <template x-if="!confirmData.type || confirmData.type === 'info'">
                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
            </template>
            <h3 class="text-xl font-bold text-gray-800" x-text="confirmData.title || '확인'"></h3>
        </div>
        
        <!-- 메시지 -->
        <p class="text-gray-600 mb-6" x-text="confirmData.message"></p>
        
        <!-- 버튼 -->
        <div class="flex justify-end gap-2">
            <button type="button" 
                    @click="showConfirmModal = false"
                    class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition"
                    x-text="confirmData.cancelText || '취소'">
            </button>
            <button type="button" 
                    @click="onConfirm(); showConfirmModal = false"
                    :class="{
                        'bg-red-600 hover:bg-red-700': confirmData.type === 'danger',
                        'bg-amber-600 hover:bg-amber-700': confirmData.type === 'warning',
                        'bg-green-600 hover:bg-green-700': confirmData.type === 'success',
                        'bg-primary-600 hover:bg-primary-700': !confirmData.type || confirmData.type === 'info'
                    }"
                    class="px-4 py-2 text-white rounded-lg transition"
                    x-text="confirmData.confirmText || '확인'">
            </button>
        </div>
    </div>
</div>
{% endmacro %}


{# ============================================================
   테이블 액션 확인 모달 (INSERT / DELETE)
   
   필요한 Alpine.js 변수:
   - showTableActionModal: boolean
   - tableActionData: { 
       action: 'INSERT' | 'DELETE',
       tableName, sourceDb, targetDb,
       sourceCorpCode, targetCorpCode,
       corpCodeColumn
     }
   - onTableActionConfirm(): function
   
   사용 예시:
   showInsertConfirm(tableName) {
       this.tableActionData = {
           action: 'INSERT',
           tableName: tableName,
           sourceDb: 'ACC_UNIES',
           targetDb: 'ACC_TOSS_YEOJU',
           sourceCorpCode: '1000',
           targetCorpCode: '4179'
       };
       this.showTableActionModal = true;
   }
   ============================================================ #}
{% macro table_action_modal() %}
<div x-show="showTableActionModal" 
     x-cloak
     x-transition:enter="transition ease-out duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl">
        <!-- 헤더 -->
        <div class="flex items-center gap-3 mb-4">
            <!-- INSERT 아이콘 -->
            <template x-if="tableActionData.action === 'INSERT'">
                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                    </svg>
                </div>
            </template>
            <!-- DELETE 아이콘 -->
            <template x-if="tableActionData.action === 'DELETE'">
                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </div>
            </template>
            <h3 class="text-xl font-bold text-gray-800">
                <span x-text="tableActionData.action === 'INSERT' ? '데이터 복사' : '데이터 삭제'"></span>
            </h3>
        </div>
        
        <!-- 메시지 -->
        <template x-if="tableActionData.action === 'INSERT'">
            <p class="text-gray-600 mb-4">
                <span class="font-mono font-semibold text-gray-800" x-text="'[' + tableActionData.tableName + ']'"></span> 
                테이블을 타겟 DB로 복사할까요?
            </p>
        </template>
        <template x-if="tableActionData.action === 'DELETE'">
            <p class="text-gray-600 mb-4">
                <span class="font-mono font-semibold text-gray-800" x-text="'[' + tableActionData.tableName + ']'"></span> 
                테이블의 데이터를 삭제할까요?
            </p>
        </template>
        
        <!-- 상세 정보 -->
        <div class="bg-gray-50 rounded-lg p-4 mb-4 space-y-2">
            <div class="flex justify-between text-sm">
                <span class="text-gray-500">소스</span>
                <span class="font-mono text-gray-800" x-text="tableActionData.sourceDb"></span>
            </div>
            <div class="flex justify-between text-sm">
                <span class="text-gray-500">타겟</span>
                <span class="font-mono text-gray-800" x-text="tableActionData.targetDb"></span>
            </div>
            <template x-if="tableActionData.sourceCorpCode && tableActionData.targetCorpCode">
                <div class="flex justify-between text-sm">
                    <span class="text-gray-500">법인코드</span>
                    <span class="font-mono text-gray-800">
                        <span x-text="tableActionData.sourceCorpCode"></span>
                        <span class="text-gray-400 mx-1">→</span>
                        <span x-text="tableActionData.targetCorpCode"></span>
                    </span>
                </div>
            </template>
        </div>
        
        <!-- 경고 메시지 (DELETE 시) -->
        <template x-if="tableActionData.action === 'DELETE'">
            <div class="bg-red-50 border border-red-200 rounded-lg p-3 mb-4">
                <p class="text-sm text-red-700 flex items-center gap-2">
                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                    이 작업은 되돌릴 수 없습니다!
                </p>
            </div>
        </template>
        
        <!-- 버튼 -->
        <div class="flex justify-end gap-2">
            <button type="button" 
                    @click="showTableActionModal = false"
                    class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">
                취소
            </button>
            <button type="button" 
                    @click="onTableActionConfirm(); showTableActionModal = false"
                    :class="{
                        'bg-blue-600 hover:bg-blue-700': tableActionData.action === 'INSERT',
                        'bg-red-600 hover:bg-red-700': tableActionData.action === 'DELETE'
                    }"
                    class="px-4 py-2 text-white rounded-lg transition"
                    x-text="tableActionData.action === 'INSERT' ? '확인' : '삭제'">
            </button>
        </div>
    </div>
</div>
{% endmacro %}


{# ============================================================
   알림 모달
   
   필요한 Alpine.js 변수:
   - showAlertModal: boolean
   - alertData: { title, message, type }
   
   type: 'info' | 'warning' | 'error' | 'success'
   ============================================================ #}
{% macro alert_modal() %}
<div x-show="showAlertModal" 
     x-cloak
     x-transition:enter="transition ease-out duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl">
        <!-- 헤더 -->
        <div class="flex items-center gap-3 mb-4">
            <!-- 아이콘 (타입별) -->
            <template x-if="alertData.type === 'error'">
                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </div>
            </template>
            <template x-if="alertData.type === 'warning'">
                <div class="w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                </div>
            </template>
            <template x-if="alertData.type === 'success'">
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
            </template>
            <template x-if="!alertData.type || alertData.type === 'info'">
                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
            </template>
            <h3 class="text-xl font-bold text-gray-800" x-text="alertData.title || '알림'"></h3>
        </div>
        
        <!-- 메시지 -->
        <p class="text-gray-600 mb-6" x-text="alertData.message"></p>
        
        <!-- 버튼 -->
        <div class="flex justify-end">
            <button type="button" 
                    @click="showAlertModal = false"
                    :class="{
                        'bg-red-600 hover:bg-red-700': alertData.type === 'error',
                        'bg-amber-600 hover:bg-amber-700': alertData.type === 'warning',
                        'bg-green-600 hover:bg-green-700': alertData.type === 'success',
                        'bg-primary-600 hover:bg-primary-700': !alertData.type || alertData.type === 'info'
                    }"
                    class="px-4 py-2 text-white rounded-lg transition">
                확인
            </button>
        </div>
    </div>
</div>
{% endmacro %}


{# ============================================================
   토스트 메시지 (하단 알림)
   
   필요한 Alpine.js 변수:
   - toast: { show, message, type }
   
   type: 'success' | 'error' | 'warning' | 'info'
   ============================================================ #}
{% macro toast_message() %}
<div x-show="toast.show" 
     x-cloak
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="opacity-0 translate-y-2"
     x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-in duration-200"
     x-transition:leave-start="opacity-100 translate-y-0"
     x-transition:leave-end="opacity-0 translate-y-2"
     :class="{
         'bg-green-600': toast.type === 'success',
         'bg-red-600': toast.type === 'error',
         'bg-amber-600': toast.type === 'warning',
         'bg-blue-600': toast.type === 'info' || !toast.type
     }"
     class="fixed bottom-4 right-4 px-6 py-3 text-white rounded-lg shadow-lg z-50 flex items-center gap-2">
    <!-- 아이콘 -->
    <template x-if="toast.type === 'success'">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
    </template>
    <template x-if="toast.type === 'error'">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
    </template>
    <template x-if="toast.type === 'warning'">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
        </svg>
    </template>
    <template x-if="toast.type === 'info' || !toast.type">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
    </template>
    <span x-text="toast.message"></span>
</div>
{% endmacro %}